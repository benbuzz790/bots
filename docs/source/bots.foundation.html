

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>bots.foundation package &mdash; bots 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            bots
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">bots.foundation package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-bots.foundation.anthropic_bots">bots.foundation.anthropic_bots module</a><ul>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicNode"><code class="docutils literal notranslate"><span class="pre">AnthropicNode</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicNode.__init__"><code class="docutils literal notranslate"><span class="pre">AnthropicNode.__init__()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicNode._add_tool_results"><code class="docutils literal notranslate"><span class="pre">AnthropicNode._add_tool_results()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicNode._build_messages"><code class="docutils literal notranslate"><span class="pre">AnthropicNode._build_messages()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicToolHandler"><code class="docutils literal notranslate"><span class="pre">AnthropicToolHandler</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.__init__"><code class="docutils literal notranslate"><span class="pre">AnthropicToolHandler.__init__()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.generate_tool_schema"><code class="docutils literal notranslate"><span class="pre">AnthropicToolHandler.generate_tool_schema()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.generate_request_schema"><code class="docutils literal notranslate"><span class="pre">AnthropicToolHandler.generate_request_schema()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.tool_name_and_input"><code class="docutils literal notranslate"><span class="pre">AnthropicToolHandler.tool_name_and_input()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.generate_response_schema"><code class="docutils literal notranslate"><span class="pre">AnthropicToolHandler.generate_response_schema()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.generate_error_schema"><code class="docutils literal notranslate"><span class="pre">AnthropicToolHandler.generate_error_schema()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicMailbox"><code class="docutils literal notranslate"><span class="pre">AnthropicMailbox</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicMailbox.last_message"><code class="docutils literal notranslate"><span class="pre">AnthropicMailbox.last_message</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicMailbox.client"><code class="docutils literal notranslate"><span class="pre">AnthropicMailbox.client</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicMailbox.__init__"><code class="docutils literal notranslate"><span class="pre">AnthropicMailbox.__init__()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicMailbox.send_message"><code class="docutils literal notranslate"><span class="pre">AnthropicMailbox.send_message()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicMailbox.process_response"><code class="docutils literal notranslate"><span class="pre">AnthropicMailbox.process_response()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot"><code class="docutils literal notranslate"><span class="pre">AnthropicBot</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.api_key"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.api_key</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.model_engine"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.model_engine</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.max_tokens"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.max_tokens</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.temperature"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.temperature</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.name"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.name</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.role"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.role</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.role_description"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.role_description</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.system_message"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.system_message</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.tool_handler"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.tool_handler</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.conversation"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.conversation</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.mailbox"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.mailbox</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.autosave"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.autosave</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot.__init__"><code class="docutils literal notranslate"><span class="pre">AnthropicBot.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.CacheController"><code class="docutils literal notranslate"><span class="pre">CacheController</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.CacheController.find_cache_control_positions"><code class="docutils literal notranslate"><span class="pre">CacheController.find_cache_control_positions()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.CacheController.should_add_cache_control"><code class="docutils literal notranslate"><span class="pre">CacheController.should_add_cache_control()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.CacheController.shift_cache_control_out_of_tool_block"><code class="docutils literal notranslate"><span class="pre">CacheController.shift_cache_control_out_of_tool_block()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.CacheController.insert_cache_control"><code class="docutils literal notranslate"><span class="pre">CacheController.insert_cache_control()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.CacheController.remove_cache_control_at_position"><code class="docutils literal notranslate"><span class="pre">CacheController.remove_cache_control_at_position()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.anthropic_bots.CacheController.manage_cache_controls"><code class="docutils literal notranslate"><span class="pre">CacheController.manage_cache_controls()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-bots.foundation.base">bots.foundation.base module</a><ul>
<li><a class="reference internal" href="#bots.foundation.base.load"><code class="docutils literal notranslate"><span class="pre">load()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines"><code class="docutils literal notranslate"><span class="pre">Engines</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.base.Engines.GPT4"><code class="docutils literal notranslate"><span class="pre">Engines.GPT4</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.GPT4_0613"><code class="docutils literal notranslate"><span class="pre">Engines.GPT4_0613</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.GPT4_32K"><code class="docutils literal notranslate"><span class="pre">Engines.GPT4_32K</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.GPT4_32K_0613"><code class="docutils literal notranslate"><span class="pre">Engines.GPT4_32K_0613</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.GPT4TURBO"><code class="docutils literal notranslate"><span class="pre">Engines.GPT4TURBO</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.GPT4TURBO_0125"><code class="docutils literal notranslate"><span class="pre">Engines.GPT4TURBO_0125</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.GPT4TURBO_VISION"><code class="docutils literal notranslate"><span class="pre">Engines.GPT4TURBO_VISION</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.GPT35TURBO"><code class="docutils literal notranslate"><span class="pre">Engines.GPT35TURBO</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.GPT35TURBO_16K"><code class="docutils literal notranslate"><span class="pre">Engines.GPT35TURBO_16K</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.GPT35TURBO_0125"><code class="docutils literal notranslate"><span class="pre">Engines.GPT35TURBO_0125</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.GPT35TURBO_INSTRUCT"><code class="docutils literal notranslate"><span class="pre">Engines.GPT35TURBO_INSTRUCT</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.CLAUDE3_HAIKU"><code class="docutils literal notranslate"><span class="pre">Engines.CLAUDE3_HAIKU</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.CLAUDE3_SONNET"><code class="docutils literal notranslate"><span class="pre">Engines.CLAUDE3_SONNET</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.CLAUDE3_OPUS"><code class="docutils literal notranslate"><span class="pre">Engines.CLAUDE3_OPUS</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.CLAUDE35_SONNET_20240620"><code class="docutils literal notranslate"><span class="pre">Engines.CLAUDE35_SONNET_20240620</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.CLAUDE35_SONNET_20241022"><code class="docutils literal notranslate"><span class="pre">Engines.CLAUDE35_SONNET_20241022</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.CLAUDE37_SONNET_20250219"><code class="docutils literal notranslate"><span class="pre">Engines.CLAUDE37_SONNET_20250219</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.get"><code class="docutils literal notranslate"><span class="pre">Engines.get()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.get_bot_class"><code class="docutils literal notranslate"><span class="pre">Engines.get_bot_class()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Engines.get_conversation_node_class"><code class="docutils literal notranslate"><span class="pre">Engines.get_conversation_node_class()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode"><code class="docutils literal notranslate"><span class="pre">ConversationNode</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode.role"><code class="docutils literal notranslate"><span class="pre">ConversationNode.role</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode.content"><code class="docutils literal notranslate"><span class="pre">ConversationNode.content</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode.parent"><code class="docutils literal notranslate"><span class="pre">ConversationNode.parent</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode.replies"><code class="docutils literal notranslate"><span class="pre">ConversationNode.replies</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode.tool_calls"><code class="docutils literal notranslate"><span class="pre">ConversationNode.tool_calls</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode.tool_results"><code class="docutils literal notranslate"><span class="pre">ConversationNode.tool_results</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode.pending_results"><code class="docutils literal notranslate"><span class="pre">ConversationNode.pending_results</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode.__init__"><code class="docutils literal notranslate"><span class="pre">ConversationNode.__init__()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._create_empty"><code class="docutils literal notranslate"><span class="pre">ConversationNode._create_empty()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._is_empty"><code class="docutils literal notranslate"><span class="pre">ConversationNode._is_empty()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._add_reply"><code class="docutils literal notranslate"><span class="pre">ConversationNode._add_reply()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._sync_tool_context"><code class="docutils literal notranslate"><span class="pre">ConversationNode._sync_tool_context()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._add_tool_calls"><code class="docutils literal notranslate"><span class="pre">ConversationNode._add_tool_calls()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._add_tool_results"><code class="docutils literal notranslate"><span class="pre">ConversationNode._add_tool_results()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._find_root"><code class="docutils literal notranslate"><span class="pre">ConversationNode._find_root()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._root_dict"><code class="docutils literal notranslate"><span class="pre">ConversationNode._root_dict()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._to_dict_recursive"><code class="docutils literal notranslate"><span class="pre">ConversationNode._to_dict_recursive()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._to_dict_self"><code class="docutils literal notranslate"><span class="pre">ConversationNode._to_dict_self()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._build_messages"><code class="docutils literal notranslate"><span class="pre">ConversationNode._build_messages()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ConversationNode._node_count"><code class="docutils literal notranslate"><span class="pre">ConversationNode._node_count()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.base.ModuleContext"><code class="docutils literal notranslate"><span class="pre">ModuleContext</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.base.ModuleContext.name"><code class="docutils literal notranslate"><span class="pre">ModuleContext.name</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ModuleContext.source"><code class="docutils literal notranslate"><span class="pre">ModuleContext.source</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ModuleContext.file_path"><code class="docutils literal notranslate"><span class="pre">ModuleContext.file_path</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ModuleContext.namespace"><code class="docutils literal notranslate"><span class="pre">ModuleContext.namespace</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ModuleContext.code_hash"><code class="docutils literal notranslate"><span class="pre">ModuleContext.code_hash</span></code></a></li>
<li><a class="reference internal" href="#id0"><code class="docutils literal notranslate"><span class="pre">ModuleContext.name</span></code></a></li>
<li><a class="reference internal" href="#id25"><code class="docutils literal notranslate"><span class="pre">ModuleContext.source</span></code></a></li>
<li><a class="reference internal" href="#id26"><code class="docutils literal notranslate"><span class="pre">ModuleContext.file_path</span></code></a></li>
<li><a class="reference internal" href="#id27"><code class="docutils literal notranslate"><span class="pre">ModuleContext.namespace</span></code></a></li>
<li><a class="reference internal" href="#id28"><code class="docutils literal notranslate"><span class="pre">ModuleContext.code_hash</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ModuleContext.__init__"><code class="docutils literal notranslate"><span class="pre">ModuleContext.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandlerError"><code class="docutils literal notranslate"><span class="pre">ToolHandlerError</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolNotFoundError"><code class="docutils literal notranslate"><span class="pre">ToolNotFoundError</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ModuleLoadError"><code class="docutils literal notranslate"><span class="pre">ModuleLoadError</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler"><code class="docutils literal notranslate"><span class="pre">ToolHandler</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.tools"><code class="docutils literal notranslate"><span class="pre">ToolHandler.tools</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.function_map"><code class="docutils literal notranslate"><span class="pre">ToolHandler.function_map</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.requests"><code class="docutils literal notranslate"><span class="pre">ToolHandler.requests</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.results"><code class="docutils literal notranslate"><span class="pre">ToolHandler.results</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.modules"><code class="docutils literal notranslate"><span class="pre">ToolHandler.modules</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.__init__"><code class="docutils literal notranslate"><span class="pre">ToolHandler.__init__()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.generate_tool_schema"><code class="docutils literal notranslate"><span class="pre">ToolHandler.generate_tool_schema()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.generate_request_schema"><code class="docutils literal notranslate"><span class="pre">ToolHandler.generate_request_schema()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.tool_name_and_input"><code class="docutils literal notranslate"><span class="pre">ToolHandler.tool_name_and_input()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.generate_response_schema"><code class="docutils literal notranslate"><span class="pre">ToolHandler.generate_response_schema()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.generate_error_schema"><code class="docutils literal notranslate"><span class="pre">ToolHandler.generate_error_schema()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.extract_requests"><code class="docutils literal notranslate"><span class="pre">ToolHandler.extract_requests()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.exec_requests"><code class="docutils literal notranslate"><span class="pre">ToolHandler.exec_requests()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler._create_builtin_wrapper"><code class="docutils literal notranslate"><span class="pre">ToolHandler._create_builtin_wrapper()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler._create_dynamic_wrapper"><code class="docutils literal notranslate"><span class="pre">ToolHandler._create_dynamic_wrapper()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.add_tool"><code class="docutils literal notranslate"><span class="pre">ToolHandler.add_tool()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler._add_tools_from_file"><code class="docutils literal notranslate"><span class="pre">ToolHandler._add_tools_from_file()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler._add_tools_from_module"><code class="docutils literal notranslate"><span class="pre">ToolHandler._add_tools_from_module()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.to_dict"><code class="docutils literal notranslate"><span class="pre">ToolHandler.to_dict()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.from_dict"><code class="docutils literal notranslate"><span class="pre">ToolHandler.from_dict()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.get_tools_json"><code class="docutils literal notranslate"><span class="pre">ToolHandler.get_tools_json()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.clear"><code class="docutils literal notranslate"><span class="pre">ToolHandler.clear()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.add_request"><code class="docutils literal notranslate"><span class="pre">ToolHandler.add_request()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.add_result"><code class="docutils literal notranslate"><span class="pre">ToolHandler.add_result()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.get_results"><code class="docutils literal notranslate"><span class="pre">ToolHandler.get_results()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.get_requests"><code class="docutils literal notranslate"><span class="pre">ToolHandler.get_requests()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler._get_code_hash"><code class="docutils literal notranslate"><span class="pre">ToolHandler._get_code_hash()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.__str__"><code class="docutils literal notranslate"><span class="pre">ToolHandler.__str__()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.ToolHandler.__repr__"><code class="docutils literal notranslate"><span class="pre">ToolHandler.__repr__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.base.Mailbox"><code class="docutils literal notranslate"><span class="pre">Mailbox</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.base.Mailbox.__init__"><code class="docutils literal notranslate"><span class="pre">Mailbox.__init__()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Mailbox.log_message"><code class="docutils literal notranslate"><span class="pre">Mailbox.log_message()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Mailbox.send_message"><code class="docutils literal notranslate"><span class="pre">Mailbox.send_message()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Mailbox.process_response"><code class="docutils literal notranslate"><span class="pre">Mailbox.process_response()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.base.Bot"><code class="docutils literal notranslate"><span class="pre">Bot</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.base.Bot.api_key"><code class="docutils literal notranslate"><span class="pre">Bot.api_key</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.name"><code class="docutils literal notranslate"><span class="pre">Bot.name</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.model_engine"><code class="docutils literal notranslate"><span class="pre">Bot.model_engine</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.max_tokens"><code class="docutils literal notranslate"><span class="pre">Bot.max_tokens</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.temperature"><code class="docutils literal notranslate"><span class="pre">Bot.temperature</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.role"><code class="docutils literal notranslate"><span class="pre">Bot.role</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.role_description"><code class="docutils literal notranslate"><span class="pre">Bot.role_description</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.conversation"><code class="docutils literal notranslate"><span class="pre">Bot.conversation</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.system_message"><code class="docutils literal notranslate"><span class="pre">Bot.system_message</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.tool_handler"><code class="docutils literal notranslate"><span class="pre">Bot.tool_handler</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.mailbox"><code class="docutils literal notranslate"><span class="pre">Bot.mailbox</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.autosave"><code class="docutils literal notranslate"><span class="pre">Bot.autosave</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.__init__"><code class="docutils literal notranslate"><span class="pre">Bot.__init__()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.respond"><code class="docutils literal notranslate"><span class="pre">Bot.respond()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.add_tools"><code class="docutils literal notranslate"><span class="pre">Bot.add_tools()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot._cvsn_respond"><code class="docutils literal notranslate"><span class="pre">Bot._cvsn_respond()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.set_system_message"><code class="docutils literal notranslate"><span class="pre">Bot.set_system_message()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.load"><code class="docutils literal notranslate"><span class="pre">Bot.load()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.save"><code class="docutils literal notranslate"><span class="pre">Bot.save()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.chat"><code class="docutils literal notranslate"><span class="pre">Bot.chat()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.__mul__"><code class="docutils literal notranslate"><span class="pre">Bot.__mul__()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.base.Bot.__str__"><code class="docutils literal notranslate"><span class="pre">Bot.__str__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-bots.foundation.openai_bots">bots.foundation.openai_bots module</a><ul>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAINode"><code class="docutils literal notranslate"><span class="pre">OpenAINode</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAINode.content"><code class="docutils literal notranslate"><span class="pre">OpenAINode.content</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAINode.role"><code class="docutils literal notranslate"><span class="pre">OpenAINode.role</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAINode.parent"><code class="docutils literal notranslate"><span class="pre">OpenAINode.parent</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAINode.children"><code class="docutils literal notranslate"><span class="pre">OpenAINode.children</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAINode.tool_calls"><code class="docutils literal notranslate"><span class="pre">OpenAINode.tool_calls</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAINode.tool_results"><code class="docutils literal notranslate"><span class="pre">OpenAINode.tool_results</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAINode.__init__"><code class="docutils literal notranslate"><span class="pre">OpenAINode.__init__()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAINode._build_messages"><code class="docutils literal notranslate"><span class="pre">OpenAINode._build_messages()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIToolHandler"><code class="docutils literal notranslate"><span class="pre">OpenAIToolHandler</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIToolHandler.tools"><code class="docutils literal notranslate"><span class="pre">OpenAIToolHandler.tools</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIToolHandler.requests"><code class="docutils literal notranslate"><span class="pre">OpenAIToolHandler.requests</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIToolHandler.results"><code class="docutils literal notranslate"><span class="pre">OpenAIToolHandler.results</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIToolHandler.generate_tool_schema"><code class="docutils literal notranslate"><span class="pre">OpenAIToolHandler.generate_tool_schema()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIToolHandler.generate_request_schema"><code class="docutils literal notranslate"><span class="pre">OpenAIToolHandler.generate_request_schema()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIToolHandler.tool_name_and_input"><code class="docutils literal notranslate"><span class="pre">OpenAIToolHandler.tool_name_and_input()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIToolHandler.generate_response_schema"><code class="docutils literal notranslate"><span class="pre">OpenAIToolHandler.generate_response_schema()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIToolHandler.generate_error_schema"><code class="docutils literal notranslate"><span class="pre">OpenAIToolHandler.generate_error_schema()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIMailbox"><code class="docutils literal notranslate"><span class="pre">OpenAIMailbox</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIMailbox.api_key"><code class="docutils literal notranslate"><span class="pre">OpenAIMailbox.api_key</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIMailbox.client"><code class="docutils literal notranslate"><span class="pre">OpenAIMailbox.client</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIMailbox.__init__"><code class="docutils literal notranslate"><span class="pre">OpenAIMailbox.__init__()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIMailbox.send_message"><code class="docutils literal notranslate"><span class="pre">OpenAIMailbox.send_message()</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIMailbox.process_response"><code class="docutils literal notranslate"><span class="pre">OpenAIMailbox.process_response()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot</span></code></a><ul>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.api_key"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.api_key</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.model_engine"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.model_engine</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.max_tokens"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.max_tokens</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.temperature"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.temperature</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.name"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.name</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.role"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.role</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.role_description"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.role_description</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.system_message"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.system_message</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.tool_handler"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.tool_handler</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.conversation"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.conversation</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.mailbox"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.mailbox</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.autosave"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.autosave</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.openai_bots.ChatGPT_Bot.__init__"><code class="docutils literal notranslate"><span class="pre">ChatGPT_Bot.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-bots.foundation">Module contents</a><ul>
<li><a class="reference internal" href="#bots.foundation.__python_requires__"><code class="docutils literal notranslate"><span class="pre">__python_requires__</span></code></a></li>
<li><a class="reference internal" href="#bots.foundation.__version__"><code class="docutils literal notranslate"><span class="pre">__version__</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">bots</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">bots.foundation package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/source/bots.foundation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bots-foundation-package">
<h1>bots.foundation package<a class="headerlink" href="#bots-foundation-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-bots.foundation.anthropic_bots">
<span id="bots-foundation-anthropic-bots-module"></span><h2>bots.foundation.anthropic_bots module<a class="headerlink" href="#module-bots.foundation.anthropic_bots" title="Link to this heading"></a></h2>
<p>Anthropic-specific bot implementation for the bots framework.</p>
<p>This module provides the necessary classes to interact with Anthropic’s Claude models,
implementing the base bot interfaces with Anthropic-specific handling for:
- Message formatting and conversation management
- Tool integration and execution
- Cache control for optimal context window usage
- API communication with retry logic</p>
<p>The main class is AnthropicBot, which provides a complete implementation ready for
use with Anthropic’s API. Supporting classes handle specific aspects of the
Anthropic integration while maintaining the framework’s abstractions.</p>
<dl class="simple">
<dt>Classes:</dt><dd><p>AnthropicNode: Conversation node implementation for Anthropic’s message format
AnthropicToolHandler: Tool management for Anthropic’s function calling format
AnthropicMailbox: API communication handler with Anthropic-specific retry logic
AnthropicBot: Main bot implementation for Anthropic’s Claude models
CacheController: Manages conversation history caching for context optimization</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicNode">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.anthropic_bots.</span></span><span class="sig-name descname"><span class="pre">AnthropicNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicNode" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConversationNode</span></code></a></p>
<p>A conversation node implementation specific to Anthropic’s API requirements.</p>
<p>This class extends ConversationNode to handle Anthropic-specific message formatting,
including proper handling of tool calls and results in the conversation tree.</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">Inherits</span> <span class="pre">all</span> <span class="pre">attributes</span> <span class="pre">from</span> <span class="pre">ConversationNode</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicNode.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicNode.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicNode.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize an AnthropicNode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – Arbitrary keyword arguments passed to parent class.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicNode._add_tool_results">
<span class="sig-name descname"><span class="pre">_add_tool_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicNode._add_tool_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicNode._add_tool_results" title="Link to this definition"></a></dt>
<dd><p>Add tool execution results to the conversation node.</p>
<p>For Anthropic bots, tool results need to be propagated to the replies or stored as
pending to be moved to the replies when a reply is added.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>results</strong> – List of tool execution result dictionaries</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicNode._build_messages">
<span class="sig-name descname"><span class="pre">_build_messages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicNode._build_messages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicNode._build_messages" title="Link to this definition"></a></dt>
<dd><p>Build message list for Anthropic API.</p>
<p>Constructs the message history in Anthropic’s expected format, properly handling
empty nodes and tool calls. Empty nodes are preserved in the structure but
filtered from API messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of message dictionaries formatted for Anthropic’s API</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicToolHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.anthropic_bots.</span></span><span class="sig-name descname"><span class="pre">AnthropicToolHandler</span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicToolHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicToolHandler" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#bots.foundation.base.ToolHandler" title="bots.foundation.base.ToolHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">ToolHandler</span></code></a></p>
<p>Tool handler implementation specific to Anthropic’s API requirements.</p>
<p>This class manages the conversion between Python functions and Anthropic’s tool format,
handling schema generation, request/response formatting, and error handling.</p>
<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicToolHandler.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicToolHandler.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize an AnthropicToolHandler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicToolHandler.generate_tool_schema">
<span class="sig-name descname"><span class="pre">generate_tool_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicToolHandler.generate_tool_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.generate_tool_schema" title="Link to this definition"></a></dt>
<dd><p>Generate Anthropic-compatible tool schema from a Python function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> – The Python function to convert into a tool schema</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>name: The function name</p></li>
<li><p>description: The function’s docstring</p></li>
<li><p>input_schema: Object describing expected parameters</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary containing the tool schema in Anthropic’s format with</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicToolHandler.generate_request_schema">
<span class="sig-name descname"><span class="pre">generate_request_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicToolHandler.generate_request_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.generate_request_schema" title="Link to this definition"></a></dt>
<dd><p>Generate request schema from an Anthropic API response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>response</strong> – The raw response from Anthropic’s API</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of request schemas (multiple requests may be in one message)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicToolHandler.tool_name_and_input">
<span class="sig-name descname"><span class="pre">tool_name_and_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicToolHandler.tool_name_and_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.tool_name_and_input" title="Link to this definition"></a></dt>
<dd><p>Extract tool name and input parameters from a request schema.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request_schema</strong> – The request schema to parse</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>tool name (str)</p></li>
<li><p>tool input parameters (dict)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple containing</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicToolHandler.generate_response_schema">
<span class="sig-name descname"><span class="pre">generate_response_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tool_output_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicToolHandler.generate_response_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.generate_response_schema" title="Link to this definition"></a></dt>
<dd><p>Generate response schema for tool execution results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> – The original tool request</p></li>
<li><p><strong>tool_output_kwargs</strong> – The tool’s execution results</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary containing the response in Anthropic’s expected format</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicToolHandler.generate_error_schema">
<span class="sig-name descname"><span class="pre">generate_error_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicToolHandler.generate_error_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicToolHandler.generate_error_schema" title="Link to this definition"></a></dt>
<dd><p>Generate an error response schema in Anthropic’s format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request_schema</strong> – Optional original request schema that caused the error</p></li>
<li><p><strong>error_msg</strong> – The error message to include</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary containing the error in Anthropic’s expected format</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicMailbox">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.anthropic_bots.</span></span><span class="sig-name descname"><span class="pre">AnthropicMailbox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicMailbox"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicMailbox" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#bots.foundation.base.Mailbox" title="bots.foundation.base.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a></p>
<p>Handles communication with Anthropic’s API.</p>
<p>This class manages message sending and response processing for Anthropic models,
including retry logic for API errors and handling of incomplete responses.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicMailbox.last_message">
<span class="sig-name descname"><span class="pre">last_message</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicMailbox.last_message" title="Link to this definition"></a></dt>
<dd><p>Optional[Dict[str, Any]] - The last message sent/received</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicMailbox.client">
<span class="sig-name descname"><span class="pre">client</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicMailbox.client" title="Link to this definition"></a></dt>
<dd><p>Optional[anthropic.Anthropic] - The Anthropic API client instance</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicMailbox.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicMailbox.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicMailbox.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize an AnthropicMailbox.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>verbose</strong> – Whether to enable verbose logging (default: False)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicMailbox.send_message">
<span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot" title="bots.foundation.anthropic_bots.AnthropicBot"><span class="pre">AnthropicBot</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicMailbox.send_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicMailbox.send_message" title="Link to this definition"></a></dt>
<dd><p>Sends a message using the Anthropic API.</p>
<p>Handles API key setup, message formatting, and implements exponential backoff
retry logic for API errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bot</strong> – The AnthropicBot instance making the request</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The API response dictionary</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If no API key is found</p></li>
<li><p><strong>Exception</strong> – If max retries are reached</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicMailbox.process_response">
<span class="sig-name descname"><span class="pre">process_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicBot" title="bots.foundation.anthropic_bots.AnthropicBot"><span class="pre">AnthropicBot</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicMailbox.process_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicMailbox.process_response" title="Link to this definition"></a></dt>
<dd><p>Process the API response and handle incomplete responses.</p>
<p>Manages continuation of responses that hit the max_tokens limit and
extracts the relevant text and role information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>response</strong> – The API response to process</p></li>
<li><p><strong>bot</strong> – The AnthropicBot instance that made the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>response text (str)</p></li>
<li><p>response role (str)</p></li>
<li><p>additional metadata (dict)</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple containing</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>anthropic.BadRequestError</strong> – If the API returns a 400 error</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.anthropic_bots.</span></span><span class="sig-name descname"><span class="pre">AnthropicBot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bots.foundation.base.Engines" title="bots.foundation.base.Engines"><span class="pre">Engines</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Engines.CLAUDE37_SONNET_20250219</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4096</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Claude'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'assistant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role_description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'a</span> <span class="pre">friendly</span> <span class="pre">AI</span> <span class="pre">assistant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autosave</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicBot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bot</span></code></a></p>
<p>A bot implementation using the Anthropic API.</p>
<p>Use when you need to create a bot that interfaces with Anthropic’s chat completion models.
Provides a complete implementation with Anthropic-specific conversation management,
tool handling, and message processing. Supports both simple chat interactions and
complex tool-using conversations.</p>
<dl class="simple">
<dt>Inherits from:</dt><dd><p>Bot: Base class for all bot implementations, providing core conversation and tool management</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.api_key">
<span class="sig-name descname"><span class="pre">api_key</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.api_key" title="Link to this definition"></a></dt>
<dd><p>Anthropic API key for authentication</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.model_engine">
<span class="sig-name descname"><span class="pre">model_engine</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.model_engine" title="Link to this definition"></a></dt>
<dd><p>The Anthropic model being used (e.g., GPT4)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="bots.html#bots.Engines" title="bots.Engines">Engines</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.max_tokens">
<span class="sig-name descname"><span class="pre">max_tokens</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.max_tokens" title="Link to this definition"></a></dt>
<dd><p>Maximum tokens allowed in completion responses</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.temperature">
<span class="sig-name descname"><span class="pre">temperature</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.temperature" title="Link to this definition"></a></dt>
<dd><p>Response randomness factor (0-1)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.name" title="Link to this definition"></a></dt>
<dd><p>Instance name for identification</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.role">
<span class="sig-name descname"><span class="pre">role</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.role" title="Link to this definition"></a></dt>
<dd><p>Bot’s role identifier</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.role_description">
<span class="sig-name descname"><span class="pre">role_description</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.role_description" title="Link to this definition"></a></dt>
<dd><p>Detailed description of bot’s role/personality (for humans to read, not used in api)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.system_message">
<span class="sig-name descname"><span class="pre">system_message</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.system_message" title="Link to this definition"></a></dt>
<dd><p>System-level instructions for the bot</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.tool_handler">
<span class="sig-name descname"><span class="pre">tool_handler</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.tool_handler" title="Link to this definition"></a></dt>
<dd><p>Manages function calling capabilities</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicToolHandler" title="bots.foundation.anthropic_bots.AnthropicToolHandler">AnthropicToolHandler</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.conversation">
<span class="sig-name descname"><span class="pre">conversation</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.conversation" title="Link to this definition"></a></dt>
<dd><p>Manages conversation history</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicNode" title="bots.foundation.anthropic_bots.AnthropicNode">AnthropicNode</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.mailbox">
<span class="sig-name descname"><span class="pre">mailbox</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.mailbox" title="Link to this definition"></a></dt>
<dd><p>Handles API communication</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.anthropic_bots.AnthropicMailbox" title="bots.foundation.anthropic_bots.AnthropicMailbox">AnthropicMailbox</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.autosave">
<span class="sig-name descname"><span class="pre">autosave</span></span><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.autosave" title="Link to this definition"></a></dt>
<dd><p>Whether to automatically save state after responses</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>python
# Create a documentation expert bot
bot = ChatGPT_Bot(</p>
<blockquote>
<div><p>model_engine=Engines.GPT4,
temperature=0.3,
role_description=”a Python documentation expert”</p>
</div></blockquote>
<p>)</p>
<p># Add tools and use the bot
bot.add_tool(my_function)
response = bot.respond(“Please help document this code.”)</p>
<p># Save the bot’s state for later use
bot.save(“doc_expert.bot”)
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.AnthropicBot.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bots.foundation.base.Engines" title="bots.foundation.base.Engines"><span class="pre">Engines</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Engines.CLAUDE37_SONNET_20250219</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4096</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Claude'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'assistant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role_description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'a</span> <span class="pre">friendly</span> <span class="pre">AI</span> <span class="pre">assistant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autosave</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#AnthropicBot.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.AnthropicBot.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize an AnthropicBot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>api_key</strong> – Optional API key (will use ANTHROPIC_API_KEY env var if not provided)</p></li>
<li><p><strong>model_engine</strong> – The Anthropic model to use (default: CLAUDE37_SONNET_20250219)</p></li>
<li><p><strong>max_tokens</strong> – Maximum tokens per response (default: 4096)</p></li>
<li><p><strong>temperature</strong> – Response randomness, 0-1 (default: 0.3)</p></li>
<li><p><strong>name</strong> – Bot’s name (default: ‘Claude’)</p></li>
<li><p><strong>role</strong> – Bot’s role (default: ‘assistant’)</p></li>
<li><p><strong>role_description</strong> – Description of bot’s role (default: ‘a friendly AI assistant’)</p></li>
<li><p><strong>autosave</strong> – Whether to autosave state after responses (default: True, saves to cwd)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.CacheController">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.anthropic_bots.</span></span><span class="sig-name descname"><span class="pre">CacheController</span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#CacheController"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.CacheController" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages cache control directives in Anthropic message histories.</p>
<p>This class handles the placement and management of cache control markers in the
conversation history to optimize context window usage. It ensures that cache
control directives are properly placed and don’t interfere with tool operations.</p>
<p>The controller maintains a balance between preserving important context and
allowing older messages to be cached or dropped when the context window fills up.</p>
<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.CacheController.find_cache_control_positions">
<span class="sig-name descname"><span class="pre">find_cache_control_positions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#CacheController.find_cache_control_positions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.CacheController.find_cache_control_positions" title="Link to this definition"></a></dt>
<dd><p>Find positions of all cache control directives in the message history.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>messages</strong> – List of message dictionaries to search</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of indices where cache control directives are found</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.CacheController.should_add_cache_control">
<span class="sig-name descname"><span class="pre">should_add_cache_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">total_messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_control_pos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#CacheController.should_add_cache_control"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.CacheController.should_add_cache_control" title="Link to this definition"></a></dt>
<dd><p>Determine if a new cache control directive should be added.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>total_messages</strong> – Total number of messages in history</p></li>
<li><p><strong>last_control_pos</strong> – Position of the last cache control directive</p></li>
<li><p><strong>threshold</strong> – Growth factor for determining new control placement (default: 5.0)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if a new cache control directive should be added</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.CacheController.shift_cache_control_out_of_tool_block">
<span class="sig-name descname"><span class="pre">shift_cache_control_out_of_tool_block</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#CacheController.shift_cache_control_out_of_tool_block"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.CacheController.shift_cache_control_out_of_tool_block" title="Link to this definition"></a></dt>
<dd><p>Move cache control directives out of tool-related message blocks.</p>
<p>Cache controls should not be placed within tool call or result blocks as this
can interfere with tool operation. This method finds the nearest safe position
to move the cache control directive to.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>messages</strong> – List of messages to modify</p></li>
<li><p><strong>position</strong> – Current position of the cache control directive</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>New position where the cache control directive was moved to</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.CacheController.insert_cache_control">
<span class="sig-name descname"><span class="pre">insert_cache_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#CacheController.insert_cache_control"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.CacheController.insert_cache_control" title="Link to this definition"></a></dt>
<dd><p>Insert a cache control directive at the specified position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>messages</strong> – List of messages to modify</p></li>
<li><p><strong>position</strong> – Position where the cache control should be inserted</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.CacheController.remove_cache_control_at_position">
<span class="sig-name descname"><span class="pre">remove_cache_control_at_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#CacheController.remove_cache_control_at_position"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.CacheController.remove_cache_control_at_position" title="Link to this definition"></a></dt>
<dd><p>Remove cache control directive at the specified position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>messages</strong> – List of messages to modify</p></li>
<li><p><strong>position</strong> – Position of the cache control to remove</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.anthropic_bots.CacheController.manage_cache_controls">
<span class="sig-name descname"><span class="pre">manage_cache_controls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/anthropic_bots.html#CacheController.manage_cache_controls"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.anthropic_bots.CacheController.manage_cache_controls" title="Link to this definition"></a></dt>
<dd><p>Manage cache control directives across the entire message history.</p>
<p>Use when you need to optimize the conversation context window by managing which
parts of the conversation history can be cached or dropped.</p>
<p>This method ensures proper placement and maintenance of cache control directives:
- Prevents interference with tool operations
- Limits the total number of cache controls</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>messages</strong> – List of messages to manage</p></li>
<li><p><strong>threshold</strong> – Growth factor for cache control placement (default: 5.0)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Modified list of messages with properly managed cache controls</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-bots.foundation.base">
<span id="bots-foundation-base-module"></span><h2>bots.foundation.base module<a class="headerlink" href="#module-bots.foundation.base" title="Link to this heading"></a></h2>
<p>Core foundation classes for the bots framework.</p>
<p>This module provides the fundamental abstractions and base classes that power the bots framework:
- Bot: Abstract base class for all LLM implementations
- ToolHandler: Manages function/module tools with context preservation
- ConversationNode: Tree-based conversation storage
- Mailbox: Abstract interface for LLM service communication
- Engines: Supported LLM model configurations</p>
<p>The classes in this module are designed to:
- Provide a consistent interface across different LLM implementations
- Enable sophisticated context and tool management
- Support complete bot portability and state preservation
- Handle conversation branching and context management efficiently</p>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>python
from bots import AnthropicBot
import my_tools</p>
<p># Create a bot with tools
bot = AnthropicBot()
bot.add_tools(my_tools)</p>
<p># Basic interaction
response = bot.respond(“Hello!”)</p>
<p># Save bot state
bot.save(“my_bot.bot”)
<a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="bots.foundation.base.load">
<span class="sig-prename descclassname"><span class="pre">bots.foundation.base.</span></span><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><span class="pre">Bot</span></a></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.load" title="Link to this definition"></a></dt>
<dd><p>Load a saved bot from a file.</p>
<p>Use when you need to restore a previously saved bot with its complete state,
including conversation history, tools, and configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – Path to the .bot file containing the saved bot state</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A reconstructed Bot instance with the saved state</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot">Bot</a></p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">bot</span> <span class="pre">=</span> <span class="pre">bots.load(&quot;my_saved_bot.bot&quot;)</span>
<span class="pre">bot.respond(&quot;Continue</span> <span class="pre">our</span> <span class="pre">previous</span> <span class="pre">conversation&quot;)</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.base.Engines">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.base.</span></span><span class="sig-name descname"><span class="pre">Engines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/base.html#Engines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Engines" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></p>
<p>Enum class representing different AI model engines.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.GPT4">
<span class="sig-name descname"><span class="pre">GPT4</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gpt-4'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.GPT4" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.GPT4_0613">
<span class="sig-name descname"><span class="pre">GPT4_0613</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gpt-4-0613'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.GPT4_0613" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.GPT4_32K">
<span class="sig-name descname"><span class="pre">GPT4_32K</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gpt-4-32k'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.GPT4_32K" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.GPT4_32K_0613">
<span class="sig-name descname"><span class="pre">GPT4_32K_0613</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gpt-4-32k-0613'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.GPT4_32K_0613" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.GPT4TURBO">
<span class="sig-name descname"><span class="pre">GPT4TURBO</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gpt-4-turbo-preview'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.GPT4TURBO" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.GPT4TURBO_0125">
<span class="sig-name descname"><span class="pre">GPT4TURBO_0125</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gpt-4-0125-preview'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.GPT4TURBO_0125" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.GPT4TURBO_VISION">
<span class="sig-name descname"><span class="pre">GPT4TURBO_VISION</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gpt-4-vision-preview'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.GPT4TURBO_VISION" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.GPT35TURBO">
<span class="sig-name descname"><span class="pre">GPT35TURBO</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gpt-3.5-turbo'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.GPT35TURBO" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.GPT35TURBO_16K">
<span class="sig-name descname"><span class="pre">GPT35TURBO_16K</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gpt-3.5-turbo-16k'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.GPT35TURBO_16K" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.GPT35TURBO_0125">
<span class="sig-name descname"><span class="pre">GPT35TURBO_0125</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gpt-3.5-turbo-0125'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.GPT35TURBO_0125" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.GPT35TURBO_INSTRUCT">
<span class="sig-name descname"><span class="pre">GPT35TURBO_INSTRUCT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gpt-3.5-turbo-instruct'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.GPT35TURBO_INSTRUCT" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.CLAUDE3_HAIKU">
<span class="sig-name descname"><span class="pre">CLAUDE3_HAIKU</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'claude-3-haiku-20240307'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.CLAUDE3_HAIKU" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.CLAUDE3_SONNET">
<span class="sig-name descname"><span class="pre">CLAUDE3_SONNET</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'claude-3-sonnet-20240229'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.CLAUDE3_SONNET" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.CLAUDE3_OPUS">
<span class="sig-name descname"><span class="pre">CLAUDE3_OPUS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'claude-3-opus-20240229'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.CLAUDE3_OPUS" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.CLAUDE35_SONNET_20240620">
<span class="sig-name descname"><span class="pre">CLAUDE35_SONNET_20240620</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'claude-3-5-sonnet-20240620'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.CLAUDE35_SONNET_20240620" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.CLAUDE35_SONNET_20241022">
<span class="sig-name descname"><span class="pre">CLAUDE35_SONNET_20241022</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'claude-3-5-sonnet-20241022'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.CLAUDE35_SONNET_20241022" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.CLAUDE37_SONNET_20250219">
<span class="sig-name descname"><span class="pre">CLAUDE37_SONNET_20250219</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'claude-3-7-sonnet-20250219'</span></em><a class="headerlink" href="#bots.foundation.base.Engines.CLAUDE37_SONNET_20250219" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.get">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#bots.foundation.base.Engines" title="bots.foundation.base.Engines"><span class="pre">Engines</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Engines.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Engines.get" title="Link to this definition"></a></dt>
<dd><p>Retrieve an Engines enum member by its string value.</p>
<p>Use when you need to convert a model name string to an Engines enum member.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – The string value of the engine (e.g., ‘gpt-4’, ‘claude-3-opus-20240229’)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The corresponding Engines enum member, or None if not found</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#bots.foundation.base.Engines" title="bots.foundation.base.Engines">Engines</a>]</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>python
engine = Engines.get(‘gpt-4’)
if engine:</p>
<blockquote>
<div><p>bot = Bot(model_engine=engine)</p>
</div></blockquote>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.get_bot_class">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_bot_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bots.foundation.base.Engines" title="bots.foundation.base.Engines"><span class="pre">Engines</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><span class="pre">Bot</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Engines.get_bot_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Engines.get_bot_class" title="Link to this definition"></a></dt>
<dd><p>Get the appropriate Bot subclass for a given model engine.</p>
<p>Use when you need to programmatically determine which Bot implementation
to use for a specific model engine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>model_engine</strong> (<a class="reference internal" href="#bots.foundation.base.Engines" title="bots.foundation.base.Engines"><em>Engines</em></a>) – The engine enum member to get the bot class for</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The Bot subclass (ChatGPT_Bot or AnthropicBot)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Type[<a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot">Bot</a>]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the model engine is not supported</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">bot_class</span> <span class="pre">=</span> <span class="pre">Engines.get_bot_class(Engines.GPT4)</span>
<span class="pre">bot</span> <span class="pre">=</span> <span class="pre">bot_class(api_key=&quot;key&quot;)</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Engines.get_conversation_node_class">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_conversation_node_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode"><span class="pre">ConversationNode</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Engines.get_conversation_node_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Engines.get_conversation_node_class" title="Link to this definition"></a></dt>
<dd><p>Get the appropriate ConversationNode subclass by name.</p>
<p>Use when you need to reconstruct conversation nodes from saved bot state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>class_name</strong> (<em>str</em>) – Name of the node class (‘OpenAINode’ or ‘AnthropicNode’)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The ConversationNode subclass</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Type[<a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode">ConversationNode</a>]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the class name is not a supported node type</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.base.</span></span><span class="sig-name descname"><span class="pre">ConversationNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tool_calls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tool_results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pending_results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tree-based storage for conversation history and tool interactions.</p>
<p>ConversationNode implements a linked tree structure that enables sophisticated
conversation management, including branching conversations and tool usage tracking.
Each node represents a message in the conversation and can have multiple replies,
forming a tree structure.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode.role">
<span class="sig-name descname"><span class="pre">role</span></span><a class="headerlink" href="#bots.foundation.base.ConversationNode.role" title="Link to this definition"></a></dt>
<dd><p>The role of the message sender (‘user’, ‘assistant’, etc.)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode.content">
<span class="sig-name descname"><span class="pre">content</span></span><a class="headerlink" href="#bots.foundation.base.ConversationNode.content" title="Link to this definition"></a></dt>
<dd><p>The message content</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#bots.foundation.base.ConversationNode.parent" title="Link to this definition"></a></dt>
<dd><p>Reference to the parent node</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode">ConversationNode</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode.replies">
<span class="sig-name descname"><span class="pre">replies</span></span><a class="headerlink" href="#bots.foundation.base.ConversationNode.replies" title="Link to this definition"></a></dt>
<dd><p>List of reply nodes</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode">ConversationNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode.tool_calls">
<span class="sig-name descname"><span class="pre">tool_calls</span></span><a class="headerlink" href="#bots.foundation.base.ConversationNode.tool_calls" title="Link to this definition"></a></dt>
<dd><p>Tool invocations made in this message</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode.tool_results">
<span class="sig-name descname"><span class="pre">tool_results</span></span><a class="headerlink" href="#bots.foundation.base.ConversationNode.tool_results" title="Link to this definition"></a></dt>
<dd><p>Results from tool executions</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode.pending_results">
<span class="sig-name descname"><span class="pre">pending_results</span></span><a class="headerlink" href="#bots.foundation.base.ConversationNode.pending_results" title="Link to this definition"></a></dt>
<dd><p>Tool results waiting to be processed</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict]</p>
</dd>
</dl>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">#</span> <span class="pre">Create</span> <span class="pre">a</span> <span class="pre">conversation</span> <span class="pre">tree</span>
<span class="pre">root</span> <span class="pre">=</span> <span class="pre">ConversationNode(role='user',</span> <span class="pre">content='Hello')</span>
<span class="pre">response</span> <span class="pre">=</span> <span class="pre">root._add_reply(role='assistant',</span> <span class="pre">content='Hi</span> <span class="pre">there!')</span>
<span class="pre">`</span></code></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tool_calls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tool_results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pending_results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize a new ConversationNode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> (<em>str</em>) – The message content</p></li>
<li><p><strong>role</strong> (<em>str</em>) – The role of the message sender</p></li>
<li><p><strong>tool_calls</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>Dict</em><em>]</em><em>]</em>) – Tool invocations made in this message</p></li>
<li><p><strong>tool_results</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>Dict</em><em>]</em><em>]</em>) – Results from tool executions</p></li>
<li><p><strong>pending_results</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>Dict</em><em>]</em><em>]</em>) – Tool results waiting to be processed</p></li>
<li><p><strong>**kwargs</strong> – Additional attributes to set on the node</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._create_empty">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_create_empty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode"><span class="pre">ConversationNode</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode"><span class="pre">ConversationNode</span></a></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._create_empty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._create_empty" title="Link to this definition"></a></dt>
<dd><p>Create an empty root node.</p>
<p>Use when initializing a new conversation tree that needs an empty root.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cls</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode"><em>ConversationNode</em></a><em>]</em><em>]</em>) – Optional specific node class to use</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An empty node with role=’empty’ and no content</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode">ConversationNode</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._is_empty">
<span class="sig-name descname"><span class="pre">_is_empty</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._is_empty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._is_empty" title="Link to this definition"></a></dt>
<dd><p>Check if this is an empty root node.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if this is an empty root node, False otherwise</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._add_reply">
<span class="sig-name descname"><span class="pre">_add_reply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode"><span class="pre">ConversationNode</span></a></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._add_reply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._add_reply" title="Link to this definition"></a></dt>
<dd><p>Add a new reply node to this conversation node.</p>
<p>Creates a new node as a child of this one, handling tool context
synchronization between siblings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – Attributes to set on the new node (content, role, etc.)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The newly created reply node</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode">ConversationNode</a></p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">node</span> <span class="pre">=</span> <span class="pre">root._add_reply(content=&quot;Hello&quot;,</span> <span class="pre">role=&quot;user&quot;)</span>
<span class="pre">response</span> <span class="pre">=</span> <span class="pre">node._add_reply(content=&quot;Hi!&quot;,</span> <span class="pre">role=&quot;assistant&quot;)</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._sync_tool_context">
<span class="sig-name descname"><span class="pre">_sync_tool_context</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._sync_tool_context"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._sync_tool_context" title="Link to this definition"></a></dt>
<dd><p>Synchronize tool results across all sibling nodes.</p>
<p>Use when tool results need to be shared between parallel conversation branches.
Takes the union of all tool results from sibling nodes and ensures each sibling
has access to all results.</p>
<dl class="simple">
<dt>Side Effects:</dt><dd><p>Updates tool_results for all sibling nodes to include all unique results.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._add_tool_calls">
<span class="sig-name descname"><span class="pre">_add_tool_calls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">calls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._add_tool_calls"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._add_tool_calls" title="Link to this definition"></a></dt>
<dd><p>Add tool call records to this node.</p>
<p>Use when new tool calls are made during the conversation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>calls</strong> (<em>List</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – List of tool call records to add</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._add_tool_results">
<span class="sig-name descname"><span class="pre">_add_tool_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._add_tool_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._add_tool_results" title="Link to this definition"></a></dt>
<dd><p>Add tool execution results to this node.</p>
<p>Use when tool execution results are received and need to be recorded.
Automatically synchronizes results with sibling nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>results</strong> (<em>List</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – List of tool result records to add</p>
</dd>
</dl>
<dl class="simple">
<dt>Side Effects:</dt><dd><ul class="simple">
<li><p>Updates this node’s tool_results</p></li>
<li><p>Synchronizes results across sibling nodes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._find_root">
<span class="sig-name descname"><span class="pre">_find_root</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode"><span class="pre">ConversationNode</span></a></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._find_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._find_root" title="Link to this definition"></a></dt>
<dd><p>Navigate to the root node of the conversation tree.</p>
<p>Use when you need to access the starting point of the conversation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The root node of the conversation tree</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode">ConversationNode</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._root_dict">
<span class="sig-name descname"><span class="pre">_root_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._root_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._root_dict" title="Link to this definition"></a></dt>
<dd><p>Convert the entire conversation tree to a dictionary.</p>
<p>Use when serializing the complete conversation for saving or transmission.
Starts from the root node and includes all branches.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary representation of the complete conversation tree</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Any]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._to_dict_recursive">
<span class="sig-name descname"><span class="pre">_to_dict_recursive</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._to_dict_recursive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._to_dict_recursive" title="Link to this definition"></a></dt>
<dd><p>Recursively convert this node and all its replies to a dictionary.</p>
<p>Use when you need to serialize a subtree of the conversation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary containing this node and all its descendants</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Any]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._to_dict_self">
<span class="sig-name descname"><span class="pre">_to_dict_self</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._to_dict_self"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._to_dict_self" title="Link to this definition"></a></dt>
<dd><p>Convert just this node to a dictionary.</p>
<p>Use when serializing a single conversation node.
Omits replies, parent references, and callable attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary containing this node’s attributes</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Any]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only serializes basic types (str, int, float, bool, list, dict)
and converts other types to strings.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._build_messages">
<span class="sig-name descname"><span class="pre">_build_messages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._build_messages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._build_messages" title="Link to this definition"></a></dt>
<dd><p>Build a chronological list of messages from root to this node.</p>
<p>Use when you need to construct the conversation history for an LLM API call.
Includes tool calls and results in each message where present.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>List of message dictionaries, each containing:</dt><dd><ul class="simple">
<li><p>role: The message sender’s role</p></li>
<li><p>content: The message text</p></li>
<li><p>tool_calls: (optional) List of tool calls made</p></li>
<li><p>tool_results: (optional) List of tool execution results</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Empty root nodes are excluded from the message list.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ConversationNode._node_count">
<span class="sig-name descname"><span class="pre">_node_count</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ConversationNode._node_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ConversationNode._node_count" title="Link to this definition"></a></dt>
<dd><p>Count the total number of nodes in the conversation tree.</p>
<p>Use when you need to measure the size of the conversation.
Counts from the root node down through all branches.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Total number of nodes in the conversation tree</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">total_messages</span> <span class="pre">=</span> <span class="pre">node._node_count()</span>
<span class="pre">print(f&quot;This</span> <span class="pre">conversation</span> <span class="pre">has</span> <span class="pre">{total_messages}</span> <span class="pre">messages&quot;)</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.base.ModuleContext">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.base.</span></span><span class="sig-name descname"><span class="pre">ModuleContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">namespace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ModuleType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/base.html#ModuleContext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ModuleContext" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Context container for module-level tool preservation.</p>
<p>Stores all necessary information to reconstruct a module and its tools,
including source code, namespace, and execution environment.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ModuleContext.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#bots.foundation.base.ModuleContext.name" title="Link to this definition"></a></dt>
<dd><p>The module’s name</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ModuleContext.source">
<span class="sig-name descname"><span class="pre">source</span></span><a class="headerlink" href="#bots.foundation.base.ModuleContext.source" title="Link to this definition"></a></dt>
<dd><p>The module’s complete source code</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ModuleContext.file_path">
<span class="sig-name descname"><span class="pre">file_path</span></span><a class="headerlink" href="#bots.foundation.base.ModuleContext.file_path" title="Link to this definition"></a></dt>
<dd><p>Original file path or generated path for dynamic modules</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ModuleContext.namespace">
<span class="sig-name descname"><span class="pre">namespace</span></span><a class="headerlink" href="#bots.foundation.base.ModuleContext.namespace" title="Link to this definition"></a></dt>
<dd><p>The module’s execution namespace</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ModuleType</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ModuleContext.code_hash">
<span class="sig-name descname"><span class="pre">code_hash</span></span><a class="headerlink" href="#bots.foundation.base.ModuleContext.code_hash" title="Link to this definition"></a></dt>
<dd><p>Hash of the source code for version checking</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#id0" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id25">
<span class="sig-name descname"><span class="pre">source</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#id25" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id26">
<span class="sig-name descname"><span class="pre">file_path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#id26" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id27">
<span class="sig-name descname"><span class="pre">namespace</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ModuleType</span></em><a class="headerlink" href="#id27" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id28">
<span class="sig-name descname"><span class="pre">code_hash</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#id28" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ModuleContext.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">namespace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ModuleType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">code_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bots.foundation.base.ModuleContext.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandlerError">
<em class="property"><span class="k"><span class="pre">exception</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.base.</span></span><span class="sig-name descname"><span class="pre">ToolHandlerError</span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandlerError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandlerError" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Base exception class for ToolHandler errors.</p>
<p>Use as a base class for all tool-related exceptions to allow
specific error handling for tool operations.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="bots.foundation.base.ToolNotFoundError">
<em class="property"><span class="k"><span class="pre">exception</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.base.</span></span><span class="sig-name descname"><span class="pre">ToolNotFoundError</span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolNotFoundError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolNotFoundError" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#bots.foundation.base.ToolHandlerError" title="bots.foundation.base.ToolHandlerError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ToolHandlerError</span></code></a></p>
<p>Raised when a requested tool is not available.</p>
<p>Use when attempting to use a tool that hasn’t been registered
with the ToolHandler.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="bots.foundation.base.ModuleLoadError">
<em class="property"><span class="k"><span class="pre">exception</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.base.</span></span><span class="sig-name descname"><span class="pre">ModuleLoadError</span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ModuleLoadError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ModuleLoadError" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#bots.foundation.base.ToolHandlerError" title="bots.foundation.base.ToolHandlerError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ToolHandlerError</span></code></a></p>
<p>Raised when a module cannot be loaded for tool extraction.</p>
<p>Use when there are issues loading a module’s source code,
executing it in a new namespace, or extracting its tools.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.base.</span></span><span class="sig-name descname"><span class="pre">ToolHandler</span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Abstract base class for managing bot tool operations.</p>
<p>ToolHandler provides a complete system for:
- Registering Python functions as bot tools
- Preserving tool context and dependencies
- Managing tool execution and results
- Serializing and deserializing tool state</p>
<p>The class supports both individual function tools and complete module imports,
preserving all necessary context for tool operation across bot save/load cycles.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.tools">
<span class="sig-name descname"><span class="pre">tools</span></span><a class="headerlink" href="#bots.foundation.base.ToolHandler.tools" title="Link to this definition"></a></dt>
<dd><p>Registered tool schemas</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.function_map">
<span class="sig-name descname"><span class="pre">function_map</span></span><a class="headerlink" href="#bots.foundation.base.ToolHandler.function_map" title="Link to this definition"></a></dt>
<dd><p>Mapping of tool names to functions</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Callable]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.requests">
<span class="sig-name descname"><span class="pre">requests</span></span><a class="headerlink" href="#bots.foundation.base.ToolHandler.requests" title="Link to this definition"></a></dt>
<dd><p>Pending tool execution requests</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.results">
<span class="sig-name descname"><span class="pre">results</span></span><a class="headerlink" href="#bots.foundation.base.ToolHandler.results" title="Link to this definition"></a></dt>
<dd><p>Results from tool executions</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.modules">
<span class="sig-name descname"><span class="pre">modules</span></span><a class="headerlink" href="#bots.foundation.base.ToolHandler.modules" title="Link to this definition"></a></dt>
<dd><p>Module contexts for imported tools</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, <a class="reference internal" href="#bots.foundation.base.ModuleContext" title="bots.foundation.base.ModuleContext">ModuleContext</a>]</p>
</dd>
</dl>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a>python
class MyToolHandler(ToolHandler):</p>
<blockquote>
<div><p># Implement abstract methods…
pass</p>
</div></blockquote>
<p>handler = MyToolHandler()
handler.add_tools(my_module)
<a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.generate_tool_schema">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_tool_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.generate_tool_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.generate_tool_schema" title="Link to this definition"></a></dt>
<dd><p>Generate the tool schema for the bot’s api. Must be implemented per provider.</p>
<p>Use to create a consistent tool description that the LLM can understand.
Must extract relevant information from the function’s signature and docstring.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em>) – The function to generate a schema for</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>Schema describing the tool’s:</dt><dd><ul class="simple">
<li><p>name and description</p></li>
<li><p>parameters and their types</p></li>
<li><p>return value format</p></li>
<li><p>usage instructions</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Any]</p>
</dd>
</dl>
<dl>
<dt>Example Schema:</dt><dd><dl>
<dt>{</dt><dd><p>“name”: “calculate_area”,
“description”: “Calculate the area of a circle”,
“parameters”: {</p>
<blockquote>
<div><p>“radius”: {“type”: “float”, “description”: “Circle radius”}</p>
</div></blockquote>
<p>},
“returns”: “float: The calculated area”</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.generate_request_schema">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_request_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.generate_request_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.generate_request_schema" title="Link to this definition"></a></dt>
<dd><p>Extract tool requests from an LLM response. Must be implemented per provider.</p>
<p>Use to parse the LLM’s response and identify any tool usage requests.
Multiple tool requests may be present in a single response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>response</strong> (<em>Any</em>) – Raw response from the LLM service</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>List of parsed tool request schemas, each containing:</dt><dd><ul class="simple">
<li><p>Specific requirements per provider</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">response</span> <span class="pre">=</span> <span class="pre">llm_service.get_response()</span>
<span class="pre">requests</span> <span class="pre">=</span> <span class="pre">handler.generate_request_schema(response)</span>
<span class="pre">#</span> <span class="pre">[{&quot;name&quot;:</span> <span class="pre">&quot;view_file&quot;,</span> <span class="pre">&quot;parameters&quot;:</span> <span class="pre">{&quot;path&quot;:</span> <span class="pre">&quot;main.py&quot;}},</span> <span class="pre">...]</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.tool_name_and_input">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tool_name_and_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.tool_name_and_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.tool_name_and_input" title="Link to this definition"></a></dt>
<dd><p>Extract tool name and parameters from a request schema. Must be implemented per provider.</p>
<p>Use to parse a tool request into components that can be used for execution.
Validates and prepares the input parameters for the tool function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request_schema</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – The request schema to parse</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Tool name (or None if request should be skipped)</p></li>
<li><p>Dictionary of prepared input parameters</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[Optional[str], Dict[str, Any]]</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id37"><span class="problematic" id="id38">``</span></a><a href="#id39"><span class="problematic" id="id40">`</span></a>python
name, params = handler.tool_name_and_input({</p>
<blockquote>
<div><p>“name”: “calculate_area”,
“parameters”: {“radius”: “5.0”}</p>
</div></blockquote>
<p>})
if name:</p>
<blockquote>
<div><p>result = handler.function_map[name](<a href="#id41"><span class="problematic" id="id42">**</span></a>params)</p>
</div></blockquote>
<p><a href="#id43"><span class="problematic" id="id44">``</span></a><a href="#id45"><span class="problematic" id="id46">`</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.generate_response_schema">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_response_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tool_output_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.generate_response_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.generate_response_schema" title="Link to this definition"></a></dt>
<dd><p>Generate a response schema from tool execution results. Must be implemented per provider.</p>
<p>Use to format tool output in a way the LLM can understand and process.
Maintains connection between request and response through request metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – The original request schema</p></li>
<li><p><strong>tool_output_kwargs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – The tool’s execution results</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>Formatted response schema containing:</dt><dd><ul class="simple">
<li><p>Specific Schema for provider</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Any]</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">result</span> <span class="pre">=</span> <span class="pre">tool_func(**params)</span>
<span class="pre">response</span> <span class="pre">=</span> <span class="pre">handler.generate_response_schema(request,</span> <span class="pre">result)</span>
<span class="pre">#</span> <span class="pre">{&quot;tool_name&quot;:</span> <span class="pre">&quot;view_file&quot;,</span> <span class="pre">&quot;status&quot;:</span> <span class="pre">&quot;success&quot;,</span> <span class="pre">&quot;content&quot;:</span> <span class="pre">&quot;file</span> <span class="pre">contents...&quot;}</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.generate_error_schema">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_error_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.generate_error_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.generate_error_schema" title="Link to this definition"></a></dt>
<dd><p>Generate an error response schema. Must be implemented per provider.</p>
<p>Use to format error messages in a way the LLM can understand and handle appropriately.
Should maintain consistency with successful response schemas.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request_schema</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – The request that caused the error</p></li>
<li><p><strong>error_msg</strong> (<em>str</em>) – The error message to include</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>Error response schema containing:</dt><dd><ul class="simple">
<li><p>Required schema per provider</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Any]</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id47"><span class="problematic" id="id48">``</span></a><a href="#id49"><span class="problematic" id="id50">`</span></a>python
try:</p>
<blockquote>
<div><p>result = tool_func(<a href="#id51"><span class="problematic" id="id52">**</span></a>params)</p>
</div></blockquote>
<dl class="simple">
<dt>except Exception as e:</dt><dd><p>error = handler.generate_error_schema(request, str(e))
# {“status”: “error”, “message”: “File not found”, “type”: “FileNotFoundError”}</p>
</dd>
</dl>
<p><a href="#id53"><span class="problematic" id="id54">``</span></a><a href="#id55"><span class="problematic" id="id56">`</span></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.extract_requests">
<span class="sig-name descname"><span class="pre">extract_requests</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.extract_requests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.extract_requests" title="Link to this definition"></a></dt>
<dd><p>Extract and parse tool requests from an LLM response.</p>
<p>Use when you need to identify and process tool usage requests
from a raw LLM response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>response</strong> (<em>Any</em>) – The raw response from the LLM service</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of parsed request schemas</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
<dl class="simple">
<dt>Side Effects:</dt><dd><ul class="simple">
<li><p>Clears existing self.requests</p></li>
<li><p>Sets self.requests to the newly parsed requests</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">requests</span> <span class="pre">=</span> <span class="pre">handler.extract_requests(llm_response)</span>
<span class="pre">#</span> <span class="pre">[{&quot;name&quot;:</span> <span class="pre">&quot;view_file&quot;,</span> <span class="pre">&quot;parameters&quot;:</span> <span class="pre">{...}},</span> <span class="pre">...]</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.exec_requests">
<span class="sig-name descname"><span class="pre">exec_requests</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.exec_requests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.exec_requests" title="Link to this definition"></a></dt>
<dd><p>Execute pending tool requests and generate results.</p>
<p>Use when you need to process all pending tool requests that have been
extracted from an LLM response. Handles execution, error handling,
and result formatting.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>List of result schemas, each containing:</dt><dd><ul class="simple">
<li><p>Tool execution results or error information</p></li>
<li><p>Status of the execution</p></li>
<li><p>Any relevant metadata</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
<dl class="simple">
<dt>Side Effects:</dt><dd><ul class="simple">
<li><p>Executes tool functions with provided parameters</p></li>
<li><p>Updates self.results with execution results</p></li>
<li><p>May produce tool-specific side effects (file operations, etc.)</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#bots.foundation.base.ToolNotFoundError" title="bots.foundation.base.ToolNotFoundError"><strong>ToolNotFoundError</strong></a> – If a requested tool is not available</p></li>
<li><p><strong>TypeError</strong> – If tool arguments are invalid</p></li>
<li><p><strong>Exception</strong> – For other tool execution errors</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">handler.extract_requests(response)</span>
<span class="pre">results</span> <span class="pre">=</span> <span class="pre">handler.exec_requests()</span>
<span class="pre">#</span> <span class="pre">[{&quot;status&quot;:</span> <span class="pre">&quot;success&quot;,</span> <span class="pre">&quot;content&quot;:</span> <span class="pre">&quot;file</span> <span class="pre">contents...&quot;},</span> <span class="pre">...]</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler._create_builtin_wrapper">
<span class="sig-name descname"><span class="pre">_create_builtin_wrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler._create_builtin_wrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler._create_builtin_wrapper" title="Link to this definition"></a></dt>
<dd><p>Create a wrapper function source code for built-in functions.</p>
<p>Use when adding built-in Python functions as tools. Creates a wrapper
that maintains proper type handling and module context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em>) – The built-in function to wrap</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Source code for the wrapper function</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Automatically handles float conversion for numeric functions</p></li>
<li><p>Preserves original module context</p></li>
<li><p>Maintains function name and basic documentation</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler._create_dynamic_wrapper">
<span class="sig-name descname"><span class="pre">_create_dynamic_wrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler._create_dynamic_wrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler._create_dynamic_wrapper" title="Link to this definition"></a></dt>
<dd><p>Create a wrapper function source code for dynamic or lambda functions.</p>
<p>Use when adding functions that don’t have accessible source code or
are dynamically created.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em>) – The function to create a wrapper for</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Source code for the wrapper function</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Preserves function signature if available</p></li>
<li><p>Copies docstring if present</p></li>
<li><p>Creates fallback implementation if source is not accessible</p></li>
<li><p>Handles both normal and dynamic functions</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.add_tool">
<span class="sig-name descname"><span class="pre">add_tool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.add_tool"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.add_tool" title="Link to this definition"></a></dt>
<dd><p>Add a single Python function as a tool for LLM use.</p>
<p>Use when you need to make an individual function available as a tool.
Handles all necessary context preservation and function wrapping.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em>) – The function to add as a tool</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If tool schema generation fails</p></li>
<li><p><strong>TypeError</strong> – If function source cannot be accessed</p></li>
<li><p><strong>OSError</strong> – If there are issues accessing function source</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Side Effects:</dt><dd><ul class="simple">
<li><p>Creates module context if none exists</p></li>
<li><p>Adds function to tool registry</p></li>
<li><p>Updates function map</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id57"><span class="problematic" id="id58">``</span></a><a href="#id59"><span class="problematic" id="id60">`</span></a>python
def calculate_area(radius: float) -&gt; float:</p>
<blockquote>
<div><p>‘’’Calculate circle area. Use when…’’’
return 3.14159 * radius * radius</p>
</div></blockquote>
<p>handler.add_tool(calculate_area)
<a href="#id61"><span class="problematic" id="id62">``</span></a><a href="#id63"><span class="problematic" id="id64">`</span></a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Preserves function’s full context including docstring</p></li>
<li><p>Creates wrappers for built-in and dynamic functions</p></li>
<li><p>Maintains all necessary dependencies</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler._add_tools_from_file">
<span class="sig-name descname"><span class="pre">_add_tools_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler._add_tools_from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler._add_tools_from_file" title="Link to this definition"></a></dt>
<dd><p>Add all non-private functions from a Python file as tools.</p>
<p>Use when you want to add all suitable functions from a Python file.
Handles module loading, dependency preservation, and context management.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – Path to the Python file containing tool functions</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>FileNotFoundError</strong> – If the specified file doesn’t exist</p></li>
<li><p><a class="reference internal" href="#bots.foundation.base.ModuleLoadError" title="bots.foundation.base.ModuleLoadError"><strong>ModuleLoadError</strong></a> – If there’s an error loading the module or its dependencies</p></li>
<li><p><strong>SyntaxError</strong> – If the Python file contains syntax errors</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Side Effects:</dt><dd><ul class="simple">
<li><p>Creates module context for the file</p></li>
<li><p>Adds all non-private functions as tools</p></li>
<li><p>Preserves module dependencies and imports</p></li>
<li><p>Updates module registry</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">handler._add_tools_from_file(&quot;path/to/tools.py&quot;)</span>
<span class="pre">`</span></code></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Only adds top-level functions (not nested in classes/functions)</p></li>
<li><p>Skips functions whose names start with underscore</p></li>
<li><p>Maintains original module context for all functions</p></li>
<li><p>Preserves source code for serialization</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler._add_tools_from_module">
<span class="sig-name descname"><span class="pre">_add_tools_from_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ModuleType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler._add_tools_from_module"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler._add_tools_from_module" title="Link to this definition"></a></dt>
<dd><p>Add all non-private functions from a Python module as tools.</p>
<p>Use when you want to add functions from an imported module or
dynamically created module object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>module</strong> (<em>ModuleType</em>) – Module object containing the tool functions</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#bots.foundation.base.ModuleLoadError" title="bots.foundation.base.ModuleLoadError"><strong>ModuleLoadError</strong></a> – If module lacks both __file__ and __source__ attributes</p></li>
<li><p><strong>ImportError</strong> – If module dependencies cannot be resolved</p></li>
<li><p><strong>Exception</strong> – For other module processing errors</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Side Effects:</dt><dd><ul class="simple">
<li><p>Creates module context if needed</p></li>
<li><p>Adds all non-private functions as tools</p></li>
<li><p>Updates module registry</p></li>
<li><p>Preserves module state and dependencies</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">import</span> <span class="pre">my_tools</span>
<span class="pre">handler._add_tools_from_module(my_tools)</span>
<span class="pre">`</span></code></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Module must have either __file__ or __source__ attribute</p></li>
<li><p>Only processes top-level functions</p></li>
<li><p>Skips functions whose names start with underscore</p></li>
<li><p>Maintains complete module context</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.to_dict" title="Link to this definition"></a></dt>
<dd><p>Serialize the complete ToolHandler state to a dictionary.</p>
<p>Use when you need to save or transmit the tool handler’s state,
including all tools, modules, and execution state.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Serialized state containing:</dt><dd><ul class="simple">
<li><p>Handler class information</p></li>
<li><p>Registered tools and their schemas</p></li>
<li><p>Module contexts and source code</p></li>
<li><p>Function mappings and relationships</p></li>
<li><p>Current requests and results</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Any]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Preserves complete module contexts</p></li>
<li><p>Handles both file-based and dynamic modules</p></li>
<li><p>Includes function source code for reconstruction</p></li>
<li><p>Maintains tool relationships and dependencies</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.from_dict">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#bots.foundation.base.ToolHandler" title="bots.foundation.base.ToolHandler"><span class="pre">ToolHandler</span></a></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.from_dict" title="Link to this definition"></a></dt>
<dd><p>Reconstruct a ToolHandler instance from serialized state.</p>
<p>Use when restoring a previously serialized tool handler,
such as when loading a saved bot state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Serialized state from to_dict()</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Reconstructed handler instance</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.base.ToolHandler" title="bots.foundation.base.ToolHandler">ToolHandler</a></p>
</dd>
</dl>
<dl class="simple">
<dt>Side Effects:</dt><dd><ul class="simple">
<li><p>Creates new module contexts</p></li>
<li><p>Reconstructs function objects</p></li>
<li><p>Restores tool registry</p></li>
<li><p>Preserves request/result history</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Only restores explicitly registered tools</p></li>
<li><p>Verifies code hashes for security</p></li>
<li><p>Maintains original module structure</p></li>
<li><p>Preserves execution state (requests/results)</p></li>
</ul>
</div>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">saved_state</span> <span class="pre">=</span> <span class="pre">handler.to_dict()</span>
<span class="pre">#</span> <span class="pre">Later...</span>
<span class="pre">new_handler</span> <span class="pre">=</span> <span class="pre">ToolHandler.from_dict(saved_state)</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.get_tools_json">
<span class="sig-name descname"><span class="pre">get_tools_json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.get_tools_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.get_tools_json" title="Link to this definition"></a></dt>
<dd><p>Get a JSON string representation of all registered tools.</p>
<p>Use when you need a serialized view of the available tools,
such as for debugging or external tool discovery.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>JSON string containing all tool schemas, formatted with indentation</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">tools_json</span> <span class="pre">=</span> <span class="pre">handler.get_tools_json()</span>
<span class="pre">print(f&quot;Available</span> <span class="pre">tools:</span> <span class="pre">{tools_json}&quot;)</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.clear" title="Link to this definition"></a></dt>
<dd><p>Clear all stored tool results and requests.</p>
<p>Use when you need to reset the handler’s execution state
without affecting the registered tools.</p>
<dl class="simple">
<dt>Side Effects:</dt><dd><ul class="simple">
<li><p>Empties self.results list</p></li>
<li><p>Empties self.requests list</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.add_request">
<span class="sig-name descname"><span class="pre">add_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.add_request"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.add_request" title="Link to this definition"></a></dt>
<dd><p>Add a new tool request to the pending requests.</p>
<p>Use when manually adding a tool request rather than
extracting it from an LLM response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Tool request schema to add</p>
</dd>
</dl>
<dl class="simple">
<dt>Side Effects:</dt><dd><ul class="simple">
<li><p>Appends request to self.requests list</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.add_result">
<span class="sig-name descname"><span class="pre">add_result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.add_result"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.add_result" title="Link to this definition"></a></dt>
<dd><p>Add a new tool result to the stored results.</p>
<p>Use when manually adding a tool result rather than
generating it through exec_requests().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Tool result schema to add</p>
</dd>
</dl>
<dl class="simple">
<dt>Side Effects:</dt><dd><ul class="simple">
<li><p>Appends result to self.results list</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.get_results">
<span class="sig-name descname"><span class="pre">get_results</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.get_results" title="Link to this definition"></a></dt>
<dd><p>Get all stored tool execution results.</p>
<p>Use when you need to access the complete history of
tool execution results.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of all tool result schemas</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.get_requests">
<span class="sig-name descname"><span class="pre">get_requests</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.get_requests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.get_requests" title="Link to this definition"></a></dt>
<dd><p>Get all stored tool requests.</p>
<p>Use when you need to access the complete history of
tool execution requests.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of all tool request schemas</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler._get_code_hash">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_get_code_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler._get_code_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler._get_code_hash" title="Link to this definition"></a></dt>
<dd><p>Generate an MD5 hash of a code string.</p>
<p>Use when creating a unique identifier for code content
or verifying code integrity during deserialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>code</strong> (<em>str</em>) – Source code string to hash</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>MD5 hash of the code string</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.__str__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.__str__" title="Link to this definition"></a></dt>
<dd><p>Create a simple string representation of the ToolHandler.</p>
<p>Use when you need a quick overview of the handler’s state,
showing just the number of tools and modules.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Brief summary string showing tool and module counts</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">handler</span> <span class="pre">=</span> <span class="pre">ToolHandler()</span>
<span class="pre">print(handler)</span>&#160; <span class="pre">#</span> <span class="pre">&quot;ToolHandler</span> <span class="pre">with</span> <span class="pre">5</span> <span class="pre">tools</span> <span class="pre">and</span> <span class="pre">2</span> <span class="pre">modules&quot;</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.ToolHandler.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#ToolHandler.__repr__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.ToolHandler.__repr__" title="Link to this definition"></a></dt>
<dd><p>Create a detailed string representation of the ToolHandler.</p>
<p>Use when you need a complete technical view of the handler’s state,
including all tool names and module paths.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Detailed string showing:</dt><dd><ul class="simple">
<li><p>List of all registered tool names</p></li>
<li><p>List of all module paths</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">handler</span> <span class="pre">=</span> <span class="pre">ToolHandler()</span>
<span class="pre">print(repr(handler))</span>&#160; <span class="pre">#</span> <span class="pre">Shows</span> <span class="pre">all</span> <span class="pre">tools</span> <span class="pre">and</span> <span class="pre">modules</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.base.Mailbox">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.base.</span></span><span class="sig-name descname"><span class="pre">Mailbox</span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Mailbox"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Mailbox" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Abstract base class for LLM service communication.</p>
<p>Mailbox provides a standardized interface for sending messages to and receiving
responses from different LLM services (OpenAI, Anthropic, etc.). It handles:
- Message formatting and sending
- Response parsing and processing
- Logging of all communications
- Tool result integration</p>
<p>The class abstracts away the differences between various LLM APIs,
providing a consistent interface for the Bot class.</p>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id65"><span class="problematic" id="id66">``</span></a><a href="#id67"><span class="problematic" id="id68">`</span></a>python
class AnthropicMailbox(Mailbox):</p>
<blockquote>
<div><dl class="simple">
<dt>def send_message(self, bot):</dt><dd><p># Implementation for Anthropic API
pass</p>
</dd>
<dt>def process_response(self, response, bot=None):</dt><dd><p># Parse Anthropic response format
pass</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id69"><span class="problematic" id="id70">``</span></a><a href="#id71"><span class="problematic" id="id72">`</span></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Mailbox.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/base.html#Mailbox.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Mailbox.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Mailbox.log_message">
<span class="sig-name descname"><span class="pre">log_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Mailbox.log_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Mailbox.log_message" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Mailbox.send_message">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><span class="pre">Bot</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Mailbox.send_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Mailbox.send_message" title="Link to this definition"></a></dt>
<dd><p>Send a message to the LLM service.</p>
<p>Use to handle the specifics of communicating with a particular LLM API.
Must handle message formatting, API calls, and initial response parsing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bot</strong> (<a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><em>Bot</em></a>) – Reference to the bot instance making the request.
Contains conversation history and configuration.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Raw response from the LLM service</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Any]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> – For API errors, rate limits, or other communication issues</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Should use bot.conversation for message history</p></li>
<li><p>May handle tool results depending on API requirements</p></li>
<li><p>Should respect bot.model_engine and other configuration</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Mailbox.process_response">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">process_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><span class="pre">Bot</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Mailbox.process_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Mailbox.process_response" title="Link to this definition"></a></dt>
<dd><p>Process the raw LLM response into a standardized format.</p>
<p>Use to convert service-specific response formats into a consistent structure
that can be used by the Bot class. Handles extraction of message content,
role information, and any additional metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>response</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Raw response from the LLM service</p></li>
<li><p><strong>bot</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><em>Bot</em></a><em>]</em>) – Reference to bot instance, required for services
that need to send additional messages during processing (e.g.,
OpenAI’s tool handling)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>Processed response containing:</dt><dd><ul class="simple">
<li><p>response_text: The main message content</p></li>
<li><p>role: Message sender’s role (e.g., “assistant”)</p></li>
<li><p>metadata: Additional information to be stored with the message</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[str, str, Dict[str, Any]]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If tool_handler is present, tool requests and results are already
processed and available in tool_handler.requests/results</p></li>
<li><p>Metadata dict is passed directly to ConversationNode’s kwargs</p></li>
<li><p>Each metadata item becomes an attribute of the ConversationNode</p></li>
</ul>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.base.Bot">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.base.</span></span><span class="sig-name descname"><span class="pre">Bot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_key:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_engine:</span> <span class="pre">~bots.foundation.base.Engines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens:</span> <span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature:</span> <span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role_description:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conversation:</span> <span class="pre">~bots.foundation.base.ConversationNode</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">&lt;bots.foundation.base.ConversationNode</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tool_handler:</span> <span class="pre">~bots.foundation.base.ToolHandler</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mailbox:</span> <span class="pre">~bots.foundation.base.Mailbox</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autosave:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/base.html#Bot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Bot" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Abstract base class for LLM-powered conversational agents.</p>
<p>The Bot class provides a unified interface for working with different LLM services,
handling conversation management, tool usage, and state persistence. Key features:</p>
<ul class="simple">
<li><p>Simple primary interface (respond(), chat())</p></li>
<li><p>Comprehensive tool support</p></li>
<li><p>Complete state preservation</p></li>
<li><p>Tree-based conversation management</p></li>
<li><p>Configurable parameters for each LLM</p></li>
</ul>
<p>The class is designed to make basic usage simple while allowing access to
advanced features when needed.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.api_key">
<span class="sig-name descname"><span class="pre">api_key</span></span><a class="headerlink" href="#bots.foundation.base.Bot.api_key" title="Link to this definition"></a></dt>
<dd><p>API key for the LLM service</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#bots.foundation.base.Bot.name" title="Link to this definition"></a></dt>
<dd><p>Name identifier for the bot</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.model_engine">
<span class="sig-name descname"><span class="pre">model_engine</span></span><a class="headerlink" href="#bots.foundation.base.Bot.model_engine" title="Link to this definition"></a></dt>
<dd><p>The specific LLM model to use</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.base.Engines" title="bots.foundation.base.Engines">Engines</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.max_tokens">
<span class="sig-name descname"><span class="pre">max_tokens</span></span><a class="headerlink" href="#bots.foundation.base.Bot.max_tokens" title="Link to this definition"></a></dt>
<dd><p>Maximum tokens in model responses</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.temperature">
<span class="sig-name descname"><span class="pre">temperature</span></span><a class="headerlink" href="#bots.foundation.base.Bot.temperature" title="Link to this definition"></a></dt>
<dd><p>Randomness in model responses (0.0-1.0)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.role">
<span class="sig-name descname"><span class="pre">role</span></span><a class="headerlink" href="#bots.foundation.base.Bot.role" title="Link to this definition"></a></dt>
<dd><p>Bot’s role identifier</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.role_description">
<span class="sig-name descname"><span class="pre">role_description</span></span><a class="headerlink" href="#bots.foundation.base.Bot.role_description" title="Link to this definition"></a></dt>
<dd><p>Detailed description of bot’s role</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.conversation">
<span class="sig-name descname"><span class="pre">conversation</span></span><a class="headerlink" href="#bots.foundation.base.Bot.conversation" title="Link to this definition"></a></dt>
<dd><p>Current conversation state</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode">ConversationNode</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.system_message">
<span class="sig-name descname"><span class="pre">system_message</span></span><a class="headerlink" href="#bots.foundation.base.Bot.system_message" title="Link to this definition"></a></dt>
<dd><p>System-level instructions for the bot</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.tool_handler">
<span class="sig-name descname"><span class="pre">tool_handler</span></span><a class="headerlink" href="#bots.foundation.base.Bot.tool_handler" title="Link to this definition"></a></dt>
<dd><p>Manager for bot’s tools</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#bots.foundation.base.ToolHandler" title="bots.foundation.base.ToolHandler">ToolHandler</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.mailbox">
<span class="sig-name descname"><span class="pre">mailbox</span></span><a class="headerlink" href="#bots.foundation.base.Bot.mailbox" title="Link to this definition"></a></dt>
<dd><p>Handler for LLM communication</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#bots.foundation.base.Mailbox" title="bots.foundation.base.Mailbox">Mailbox</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.autosave">
<span class="sig-name descname"><span class="pre">autosave</span></span><a class="headerlink" href="#bots.foundation.base.Bot.autosave" title="Link to this definition"></a></dt>
<dd><p>Whether to automatically save state</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id73"><span class="problematic" id="id74">``</span></a><a href="#id75"><span class="problematic" id="id76">`</span></a>python
class MyBot(Bot):</p>
<blockquote>
<div><dl>
<dt>def __init__(self, api_key: str):</dt><dd><dl class="simple">
<dt>super().__init__(</dt><dd><p>api_key=api_key,
model_engine=Engines.GPT4,
name=”MyBot”,
role=”assistant”,
role_description=”A helpful AI assistant”</p>
</dd>
</dl>
<p>)</p>
</dd>
</dl>
</div></blockquote>
<p>bot = MyBot(“api_key”)
bot.add_tools(my_tools)
response = bot.respond(“Hello!”)
<a href="#id77"><span class="problematic" id="id78">``</span></a><a href="#id79"><span class="problematic" id="id80">`</span></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_key:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_engine:</span> <span class="pre">~bots.foundation.base.Engines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens:</span> <span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature:</span> <span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role_description:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conversation:</span> <span class="pre">~bots.foundation.base.ConversationNode</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">&lt;bots.foundation.base.ConversationNode</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tool_handler:</span> <span class="pre">~bots.foundation.base.ToolHandler</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mailbox:</span> <span class="pre">~bots.foundation.base.Mailbox</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autosave:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Bot.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Bot.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize a new Bot instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>api_key</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – API key for the LLM service</p></li>
<li><p><strong>model_engine</strong> (<a class="reference internal" href="#bots.foundation.base.Engines" title="bots.foundation.base.Engines"><em>Engines</em></a>) – The specific LLM model to use</p></li>
<li><p><strong>max_tokens</strong> (<em>int</em>) – Maximum tokens in model responses</p></li>
<li><p><strong>temperature</strong> (<em>float</em>) – Randomness in model responses (0.0-1.0)</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name identifier for the bot</p></li>
<li><p><strong>role</strong> (<em>str</em>) – Bot’s role identifier</p></li>
<li><p><strong>role_description</strong> (<em>str</em>) – Detailed description of bot’s role</p></li>
<li><p><strong>conversation</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode"><em>ConversationNode</em></a><em>]</em>) – Initial conversation state</p></li>
<li><p><strong>tool_handler</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#bots.foundation.base.ToolHandler" title="bots.foundation.base.ToolHandler"><em>ToolHandler</em></a><em>]</em>) – Manager for bot’s tools</p></li>
<li><p><strong>mailbox</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#bots.foundation.base.Mailbox" title="bots.foundation.base.Mailbox"><em>Mailbox</em></a><em>]</em>) – Handler for LLM communication</p></li>
<li><p><strong>autosave</strong> (<em>bool</em>) – Whether to automatically save state after responses. Saves to cwd.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.respond">
<span class="sig-name descname"><span class="pre">respond</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'user'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Bot.respond"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Bot.respond" title="Link to this definition"></a></dt>
<dd><p>Send a prompt to the bot and get its response.</p>
<p>This is the primary interface for interacting with the bot. The method:
1. Adds the prompt to the conversation history
2. Sends the conversation to the LLM
3. Processes any tool usage requests
4. Returns the final response</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prompt</strong> (<em>str</em>) – The message to send to the bot</p></li>
<li><p><strong>role</strong> (<em>str</em>) – Role of the message sender (defaults to ‘user’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The bot’s response text</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Automatically saves state if autosave is enabled</p></li>
<li><p>Tool usage is handled automatically if tools are available</p></li>
<li><p>Full conversation context is maintained</p></li>
</ul>
</div>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">bot.add_tools(file_tools)</span>
<span class="pre">response</span> <span class="pre">=</span> <span class="pre">bot.respond(&quot;Please</span> <span class="pre">read</span> <span class="pre">config.json&quot;)</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.add_tools">
<span class="sig-name descname"><span class="pre">add_tools</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Bot.add_tools"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Bot.add_tools" title="Link to this definition"></a></dt>
<dd><p>Add Python functions as tools available to the bot.</p>
<p>Use to provide the bot with capabilities by adding Python functions
as tools. Functions’ docstrings are used to describe the tools to the LLM.</p>
<p>The method is highly flexible in what it accepts:
- Individual Python functions
- Python files containing functions
- Imported Python modules
- Mixed combinations of the above
- Lists/tuples of any supported type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*args</strong> – Variable arguments that can be:
- str: Path to Python file with tools
- ModuleType: Module containing tools
- Callable: Single function to add
- List/Tuple: Collection of any above types</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – If an argument is not a supported type</p></li>
<li><p><strong>FileNotFoundError</strong> – If a specified file doesn’t exist</p></li>
<li><p><a class="reference internal" href="#bots.foundation.base.ModuleLoadError" title="bots.foundation.base.ModuleLoadError"><strong>ModuleLoadError</strong></a> – If there’s an error loading a module</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id81"><span class="problematic" id="id82">``</span></a><a href="#id83"><span class="problematic" id="id84">`</span></a>python
# Single function
bot.add_tools(calculate_area)</p>
<p># Multiple files and modules
bot.add_tools(</p>
<blockquote>
<div><p>“tools/file_ops.py”,
math_tools,
“tools/network.py”,
[process_data, custom_sort]</p>
</div></blockquote>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Only adds top-level functions (not nested or class methods)</p></li>
<li><p>Preserves full module context for imported tools</p></li>
<li><p>Tools persist across save/load cycles</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Bot._cvsn_respond">
<span class="sig-name descname"><span class="pre">_cvsn_respond</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode"><span class="pre">ConversationNode</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Bot._cvsn_respond"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Bot._cvsn_respond" title="Link to this definition"></a></dt>
<dd><p>Process a conversation turn with the LLM, including tool handling.</p>
<p>Use when implementing core conversation flow. This method:
1. Gets LLM response using current conversation context
2. Handles any tool usage requests
3. Updates conversation history
4. Manages tool results and context</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>response_text: The LLM’s response text</p></li>
<li><p>node: The new conversation node created</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[str, <a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode">ConversationNode</a>]</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Exception</strong> – Any errors from LLM communication or tool execution</p>
</dd>
</dl>
<dl class="simple">
<dt>Side Effects:</dt><dd><ul class="simple">
<li><p>Updates conversation tree with new node</p></li>
<li><p>Processes tool requests if any</p></li>
<li><p>Updates tool results in conversation context</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Clears tool handler state before processing</p></li>
<li><p>Automatically handles tool request extraction</p></li>
<li><p>Maintains conversation tree structure</p></li>
<li><p>Preserves tool execution results</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.set_system_message">
<span class="sig-name descname"><span class="pre">set_system_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Bot.set_system_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Bot.set_system_message" title="Link to this definition"></a></dt>
<dd><p>Set the system-level instructions for the bot.</p>
<p>Use to provide high-level guidance or constraints that should
apply to all of the bot’s responses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<em>str</em>) – System instructions for the bot</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id85"><span class="problematic" id="id86">``</span></a><a href="#id87"><span class="problematic" id="id88">`</span></a>python
bot.set_system_message(</p>
<blockquote>
<div><p>“You are a code review expert. Focus on security and performance.”</p>
</div></blockquote>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.load">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><span class="pre">Bot</span></a></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Bot.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Bot.load" title="Link to this definition"></a></dt>
<dd><p>Load a saved bot from a file.</p>
<p>Use to restore a previously saved bot with its complete state,
including conversation history, tools, and configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> (<em>str</em>) – Path to the .bot file to load</p></li>
<li><p><strong>api_key</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – New API key to use, if different from saved</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Reconstructed bot instance with restored state</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot">Bot</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>FileNotFoundError</strong> – If the specified file doesn’t exist</p></li>
<li><p><strong>ValueError</strong> – If the file contains invalid bot data</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id89"><span class="problematic" id="id90">``</span></a><a href="#id91"><span class="problematic" id="id92">`</span></a>python
# Save bot state
bot.save(“code_review_bot.bot”)</p>
<p># Later, restore the bot
bot = Bot.load(“code_review_bot.bot”, api_key=”new_key”)
<a href="#id93"><span class="problematic" id="id94">``</span></a><a href="#id95"><span class="problematic" id="id96">`</span></a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>API keys are not saved for security</p></li>
<li><p>Tool functions are fully restored with their context</p></li>
<li><p>Conversation history is preserved exactly</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Bot.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Bot.save" title="Link to this definition"></a></dt>
<dd><p>Save the bot’s complete state to a file.</p>
<p>Use to preserve the bot’s entire state including:
- Configuration and parameters
- Conversation history
- Tool definitions and context
- System messages and role information</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Name for the save file
If None, generates name using bot name and timestamp
Adds .bot extension if not present</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to the saved file</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id97"><span class="problematic" id="id98">``</span></a><a href="#id99"><span class="problematic" id="id100">`</span></a>python
# Save with generated name
path = bot.save()  # e.g., “<a class="reference external" href="mailto:MyBot&#37;&#52;&#48;2024-01-20_15-30-45&#46;bot">MyBot<span>&#64;</span>2024-01-20_15-30-45<span>&#46;</span>bot</a>”</p>
<p># Save with specific name
path = bot.save(“code_review_bot”)  # saves as “code_review_bot.bot”
<a href="#id101"><span class="problematic" id="id102">``</span></a><a href="#id103"><span class="problematic" id="id104">`</span></a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>API keys are not saved for security</p></li>
<li><p>Creates directories in path if they don’t exist</p></li>
<li><p>Maintains complete tool context for restoration</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.chat">
<span class="sig-name descname"><span class="pre">chat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Bot.chat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Bot.chat" title="Link to this definition"></a></dt>
<dd><p>Start an interactive chat session with the bot.</p>
<p>Use when you want to have a continuous conversation with the bot
in the terminal. The session continues until ‘/exit’ is entered.</p>
<p>Features:
- Simple text-based interface
- Shows tool usage information
- Maintains conversation context
- Visual separators between messages</p>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">bot.add_tools(my_tools)</span>
<span class="pre">bot.chat()</span>
<span class="pre">#</span> <span class="pre">You:</span> <span class="pre">Please</span> <span class="pre">analyze</span> <span class="pre">the</span> <span class="pre">code</span> <span class="pre">in</span> <span class="pre">main.py</span>
<span class="pre">#</span> <span class="pre">Bot:</span> <span class="pre">I'll</span> <span class="pre">take</span> <span class="pre">a</span> <span class="pre">look...</span>
<span class="pre">#</span> <span class="pre">Used</span> <span class="pre">Tool:</span> <span class="pre">view_file</span>
<span class="pre">#</span> <span class="pre">...</span>
<span class="pre">`</span></code></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Enter ‘/exit’ to end the session</p></li>
<li><p>Tool usage is displayed if tools are available</p></li>
<li><p>State is saved according to autosave setting</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.__mul__">
<span class="sig-name descname"><span class="pre">__mul__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><span class="pre">Bot</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Bot.__mul__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Bot.__mul__" title="Link to this definition"></a></dt>
<dd><p>Create multiple copies of this bot.</p>
<p>Use when you need multiple instances of the same bot configuration,
for example when running parallel operations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<em>int</em>) – Number of copies to create</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of independent bot copies</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot">Bot</a>]</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id105"><span class="problematic" id="id106">``</span></a><a href="#id107"><span class="problematic" id="id108">`</span></a>python
# Create 3 identical bots
bots = base_bot * 3</p>
<p># Use in parallel operations
results = [bot.respond(“Hello”) for bot in bots]
<a href="#id109"><span class="problematic" id="id110">``</span></a><a href="#id111"><span class="problematic" id="id112">`</span></a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Each copy is completely independent</p></li>
<li><p>Copies include all configuration and tools</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.base.Bot.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/bots/foundation/base.html#Bot.__str__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.base.Bot.__str__" title="Link to this definition"></a></dt>
<dd><p>Create a human-readable string representation of the bot.</p>
<p>Use when you need a detailed, formatted view of the bot’s state,
including conversation history and tool usage.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Formatted string containing:</dt><dd><ul class="simple">
<li><p>Bot metadata (name, role, model)</p></li>
<li><p>Complete conversation history with indentation</p></li>
<li><p>Tool calls and results</p></li>
<li><p>Available tool count</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Conversation is shown as a tree structure</p></li>
<li><p>Tool results are included with each message</p></li>
<li><p>Handles deep conversation trees with level indicators</p></li>
<li><p>Formats content for readable terminal output</p></li>
</ul>
</div>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">bot</span> <span class="pre">=</span> <span class="pre">MyBot(&quot;api_key&quot;)</span>
<span class="pre">print(bot)</span>&#160; <span class="pre">#</span> <span class="pre">Shows</span> <span class="pre">complete</span> <span class="pre">bot</span> <span class="pre">state</span>
<span class="pre">`</span></code></p>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="module-bots.foundation.openai_bots">
<span id="bots-foundation-openai-bots-module"></span><h2>bots.foundation.openai_bots module<a class="headerlink" href="#module-bots.foundation.openai_bots" title="Link to this heading"></a></h2>
<p>OpenAI-specific implementations of the bot framework components.</p>
<p>Use when you need to create and manage bots that interface with OpenAI’s chat completion API.
This module provides OpenAI-specific implementations of conversation nodes, tool handling,
message processing, and the main bot class.</p>
<dl class="simple">
<dt>Key Components:</dt><dd><ul class="simple">
<li><p>OpenAINode: Manages conversation history in OpenAI’s expected format</p></li>
<li><p>OpenAIToolHandler: Handles function calling with OpenAI’s schema</p></li>
<li><p>OpenAIMailbox: Manages API communication with OpenAI</p></li>
<li><p>ChatGPT_Bot: Main bot implementation for OpenAI models</p></li>
</ul>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAINode">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.openai_bots.</span></span><span class="sig-name descname"><span class="pre">OpenAINode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAINode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAINode" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConversationNode</span></code></a></p>
<p>A conversation node implementation specific to OpenAI’s chat format.</p>
<p>Use when you need to manage conversation history in a format compatible with OpenAI’s chat API.
Handles proper formatting of messages, tool calls, and tool results in the conversation tree.</p>
<dl class="simple">
<dt>Inherits from:</dt><dd><p>ConversationNode: Base class for conversation tree nodes</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAINode.content">
<span class="sig-name descname"><span class="pre">content</span></span><a class="headerlink" href="#bots.foundation.openai_bots.OpenAINode.content" title="Link to this definition"></a></dt>
<dd><p>The message content for this node</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAINode.role">
<span class="sig-name descname"><span class="pre">role</span></span><a class="headerlink" href="#bots.foundation.openai_bots.OpenAINode.role" title="Link to this definition"></a></dt>
<dd><p>The role of the message sender (‘user’, ‘assistant’, or ‘tool’)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAINode.parent">
<span class="sig-name descname"><span class="pre">parent</span></span><a class="headerlink" href="#bots.foundation.openai_bots.OpenAINode.parent" title="Link to this definition"></a></dt>
<dd><p>Reference to the parent node in conversation tree</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode">ConversationNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAINode.children">
<span class="sig-name descname"><span class="pre">children</span></span><a class="headerlink" href="#bots.foundation.openai_bots.OpenAINode.children" title="Link to this definition"></a></dt>
<dd><p>List of child nodes in conversation tree</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#bots.foundation.base.ConversationNode" title="bots.foundation.base.ConversationNode">ConversationNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAINode.tool_calls">
<span class="sig-name descname"><span class="pre">tool_calls</span></span><a class="headerlink" href="#bots.foundation.openai_bots.OpenAINode.tool_calls" title="Link to this definition"></a></dt>
<dd><p>List of tool calls made in this node</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[List[Dict]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAINode.tool_results">
<span class="sig-name descname"><span class="pre">tool_results</span></span><a class="headerlink" href="#bots.foundation.openai_bots.OpenAINode.tool_results" title="Link to this definition"></a></dt>
<dd><p>List of results from tool executions</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[List[Dict]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAINode.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAINode.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAINode.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize an OpenAINode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – Arbitrary keyword arguments passed to parent class</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAINode._build_messages">
<span class="sig-name descname"><span class="pre">_build_messages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAINode._build_messages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAINode._build_messages" title="Link to this definition"></a></dt>
<dd><p>Build message list for OpenAI API, properly handling empty nodes and tool calls.</p>
<p>Use when you need to convert the conversation tree into OpenAI’s expected message format.
Traverses the conversation tree from current node to root, building a properly formatted
message list that includes all relevant context, tool calls, and tool results.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of messages in OpenAI chat format, where each message is a
dictionary containing ‘role’ and ‘content’ keys, and optionally ‘tool_calls’ for
assistant messages or ‘tool_call_id’ for tool response messages.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIToolHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.openai_bots.</span></span><span class="sig-name descname"><span class="pre">OpenAIToolHandler</span></span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAIToolHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIToolHandler" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#bots.foundation.base.ToolHandler" title="bots.foundation.base.ToolHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">ToolHandler</span></code></a></p>
<p>Tool handler implementation specific to OpenAI’s function calling format.</p>
<p>Use when you need to manage tool/function definitions and executions for OpenAI chat models.
Handles conversion between Python functions and OpenAI’s function calling schema, including
proper formatting of function definitions, calls, and results.</p>
<dl class="simple">
<dt>Inherits from:</dt><dd><p>ToolHandler: Base class for managing tool operations</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIToolHandler.tools">
<span class="sig-name descname"><span class="pre">tools</span></span><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIToolHandler.tools" title="Link to this definition"></a></dt>
<dd><p>List of tool definitions in OpenAI function format</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIToolHandler.requests">
<span class="sig-name descname"><span class="pre">requests</span></span><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIToolHandler.requests" title="Link to this definition"></a></dt>
<dd><p>Current list of pending tool/function calls</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIToolHandler.results">
<span class="sig-name descname"><span class="pre">results</span></span><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIToolHandler.results" title="Link to this definition"></a></dt>
<dd><p>Results from the most recent tool executions</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIToolHandler.generate_tool_schema">
<span class="sig-name descname"><span class="pre">generate_tool_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAIToolHandler.generate_tool_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIToolHandler.generate_tool_schema" title="Link to this definition"></a></dt>
<dd><p>Generate OpenAI-compatible function definitions from Python functions.</p>
<p>Use when you need to convert a Python function into OpenAI’s function definition format.
Extracts function name, docstring, and signature to create a schema that OpenAI can
understand and use for function calling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em>) – The Python function to convert into a tool schema. Should have
a proper docstring and type hints for best results.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>OpenAI-compatible function definition containing:</dt><dd><ul class="simple">
<li><p>type: Always ‘function’</p></li>
<li><dl class="simple">
<dt>function: Dict containing:</dt><dd><ul>
<li><p>name: The function name</p></li>
<li><p>description: Function’s docstring or default text</p></li>
<li><p>parameters: Object describing required and optional parameters</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Any]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIToolHandler.generate_request_schema">
<span class="sig-name descname"><span class="pre">generate_request_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAIToolHandler.generate_request_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIToolHandler.generate_request_schema" title="Link to this definition"></a></dt>
<dd><p>Extract tool calls from OpenAI API responses.</p>
<p>Use when you need to parse tool/function calls from an OpenAI chat completion response.
Handles both single and multiple function calls in the response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>response</strong> (<em>Any</em>) – The raw response from OpenAI’s chat completion API, typically
containing a ‘choices’ field with message and potential tool calls</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>List of tool calls, each containing:</dt><dd><ul class="simple">
<li><p>id: The unique tool call ID</p></li>
<li><p>type: The type of tool call (typically ‘function’)</p></li>
<li><dl class="simple">
<dt>function: Dict containing:</dt><dd><ul>
<li><p>name: The function name to call</p></li>
<li><p>arguments: JSON string of function arguments</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIToolHandler.tool_name_and_input">
<span class="sig-name descname"><span class="pre">tool_name_and_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAIToolHandler.tool_name_and_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIToolHandler.tool_name_and_input" title="Link to this definition"></a></dt>
<dd><p>Parse OpenAI’s function call format into tool name and arguments.</p>
<p>Use when you need to extract the function name and arguments from an OpenAI function call.
Handles JSON parsing of the arguments string into a Python dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request_schema</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – The function call schema from OpenAI, containing
function name and arguments as a JSON string</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl>
<dt>A tuple containing:</dt><dd><ul class="simple">
<li><p>The function name (str)</p></li>
<li><p>Dictionary of parsed arguments (Dict[str, Any])</p></li>
</ul>
<p>Returns (None, None) if request_schema is empty</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[str, Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIToolHandler.generate_response_schema">
<span class="sig-name descname"><span class="pre">generate_response_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tool_output_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAIToolHandler.generate_response_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIToolHandler.generate_response_schema" title="Link to this definition"></a></dt>
<dd><p>Format tool execution results for OpenAI’s expected format.</p>
<p>Use when you need to format a tool’s output for OpenAI’s function calling API.
Converts Python function outputs into the message format OpenAI expects for tool results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – The original function call request containing the tool_call_id</p></li>
<li><p><strong>tool_output_kwargs</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – The output from the tool execution</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>OpenAI-compatible tool response containing:</dt><dd><ul class="simple">
<li><p>role: Always ‘tool’</p></li>
<li><p>content: String representation of the tool output</p></li>
<li><p>tool_call_id: ID from the original request</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Any]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIToolHandler.generate_error_schema">
<span class="sig-name descname"><span class="pre">generate_error_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAIToolHandler.generate_error_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIToolHandler.generate_error_schema" title="Link to this definition"></a></dt>
<dd><p>Generate an error response in OpenAI’s expected format.</p>
<p>Use when you need to format an error that occurred during tool execution.
Creates a properly formatted error message that can be included in the conversation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request_schema</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – The original request that caused the error,
containing the tool_call_id if available</p></li>
<li><p><strong>error_msg</strong> (<em>str</em>) – The error message to include in the response</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>OpenAI-compatible error response containing:</dt><dd><ul class="simple">
<li><p>role: Always ‘tool’</p></li>
<li><p>content: The error message</p></li>
<li><p>tool_call_id: ID from the original request or ‘unknown’</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Any]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIMailbox">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.openai_bots.</span></span><span class="sig-name descname"><span class="pre">OpenAIMailbox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAIMailbox"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIMailbox" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#bots.foundation.base.Mailbox" title="bots.foundation.base.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a></p>
<p>Mailbox implementation for handling OpenAI API communication.</p>
<p>Use when you need to manage message sending and receiving with OpenAI’s chat completion API.
Handles API key management, message formatting, and response processing including tool calls.
Provides logging of API interactions for debugging purposes.</p>
<dl class="simple">
<dt>Inherits from:</dt><dd><p>Mailbox: Base class for API communication</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIMailbox.api_key">
<span class="sig-name descname"><span class="pre">api_key</span></span><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIMailbox.api_key" title="Link to this definition"></a></dt>
<dd><p>OpenAI API key used for authentication</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIMailbox.client">
<span class="sig-name descname"><span class="pre">client</span></span><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIMailbox.client" title="Link to this definition"></a></dt>
<dd><p>Initialized OpenAI client instance for API calls</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>OpenAI</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIMailbox.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAIMailbox.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIMailbox.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize OpenAI API client.</p>
<p>Use when you need to create a new OpenAI API communication channel.
Handles API key validation and client initialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>api_key</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – OpenAI API key. If not provided, attempts to read from
OPENAI_API_KEY environment variable.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If no API key is provided and none is found in environment variables.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIMailbox.send_message">
<span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><span class="pre">Bot</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAIMailbox.send_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIMailbox.send_message" title="Link to this definition"></a></dt>
<dd><p>Send a message to OpenAI’s chat completion API.</p>
<p>Use when you need to send a conversation to OpenAI and get a completion response.
Handles message formatting, system messages, tool definitions, and API parameters.
Includes logging of both outgoing messages and incoming responses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bot</strong> (<a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><em>Bot</em></a>) – The bot instance containing:
- conversation history
- system message
- tool definitions
- model configuration (engine, tokens, temperature)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>Raw response from OpenAI’s chat completion API containing:</dt><dd><ul class="simple">
<li><p>choices: List of completion choices</p></li>
<li><p>usage: Token usage statistics</p></li>
<li><p>model: Model used for completion</p></li>
<li><p>id: Response ID</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Any]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> – Any error from the OpenAI API is re-raised for proper handling</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.OpenAIMailbox.process_response">
<span class="sig-name descname"><span class="pre">process_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><span class="pre">Bot</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#OpenAIMailbox.process_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.OpenAIMailbox.process_response" title="Link to this definition"></a></dt>
<dd><p>Process OpenAI’s response and handle any tool calls recursively.</p>
<p>Use when you need to extract the final response content after handling any tool calls.
Manages the recursive process of executing tool calls and getting follow-up responses
until a final text response is received.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>response</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Raw response from OpenAI’s chat completion API containing
the message content and any tool calls</p></li>
<li><p><strong>bot</strong> (<a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><em>Bot</em></a>) – The bot instance for handling tool calls and maintaining conversation state</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple containing:</dt><dd><ul class="simple">
<li><p>The final response content (str)</p></li>
<li><p>The role of the message (str)</p></li>
<li><p>Additional metadata dictionary (Dict[str, Any])</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[str, str, Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bots.foundation.openai_bots.</span></span><span class="sig-name descname"><span class="pre">ChatGPT_Bot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bots.foundation.base.Engines" title="bots.foundation.base.Engines"><span class="pre">Engines</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Engines.GPT4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4096</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'bot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'assistant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role_description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'a</span> <span class="pre">friendly</span> <span class="pre">AI</span> <span class="pre">assistant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autosave</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#ChatGPT_Bot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#bots.foundation.base.Bot" title="bots.foundation.base.Bot"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bot</span></code></a></p>
<p>A bot implementation using the OpenAI GPT API.</p>
<p>Use when you need to create a bot that interfaces with OpenAI’s chat completion models.
Provides a complete implementation with OpenAI-specific conversation management,
tool handling, and message processing. Supports both simple chat interactions and
complex tool-using conversations.</p>
<dl class="simple">
<dt>Inherits from:</dt><dd><p>Bot: Base class for all bot implementations, providing core conversation and tool management</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.api_key">
<span class="sig-name descname"><span class="pre">api_key</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.api_key" title="Link to this definition"></a></dt>
<dd><p>OpenAI API key for authentication</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.model_engine">
<span class="sig-name descname"><span class="pre">model_engine</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.model_engine" title="Link to this definition"></a></dt>
<dd><p>The OpenAI model being used (e.g., GPT4)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="bots.html#bots.Engines" title="bots.Engines">Engines</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.max_tokens">
<span class="sig-name descname"><span class="pre">max_tokens</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.max_tokens" title="Link to this definition"></a></dt>
<dd><p>Maximum tokens allowed in completion responses</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.temperature">
<span class="sig-name descname"><span class="pre">temperature</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.temperature" title="Link to this definition"></a></dt>
<dd><p>Response randomness factor (0-1)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.name" title="Link to this definition"></a></dt>
<dd><p>Instance name for identification</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.role">
<span class="sig-name descname"><span class="pre">role</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.role" title="Link to this definition"></a></dt>
<dd><p>Bot’s role identifier</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.role_description">
<span class="sig-name descname"><span class="pre">role_description</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.role_description" title="Link to this definition"></a></dt>
<dd><p>Detailed description of bot’s role/personality</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.system_message">
<span class="sig-name descname"><span class="pre">system_message</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.system_message" title="Link to this definition"></a></dt>
<dd><p>System-level instructions for the bot</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.tool_handler">
<span class="sig-name descname"><span class="pre">tool_handler</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.tool_handler" title="Link to this definition"></a></dt>
<dd><p>Manages function calling capabilities</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIToolHandler" title="bots.foundation.openai_bots.OpenAIToolHandler">OpenAIToolHandler</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.conversation">
<span class="sig-name descname"><span class="pre">conversation</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.conversation" title="Link to this definition"></a></dt>
<dd><p>Manages conversation history</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.openai_bots.OpenAINode" title="bots.foundation.openai_bots.OpenAINode">OpenAINode</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.mailbox">
<span class="sig-name descname"><span class="pre">mailbox</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.mailbox" title="Link to this definition"></a></dt>
<dd><p>Handles API communication</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#bots.foundation.openai_bots.OpenAIMailbox" title="bots.foundation.openai_bots.OpenAIMailbox">OpenAIMailbox</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.autosave">
<span class="sig-name descname"><span class="pre">autosave</span></span><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.autosave" title="Link to this definition"></a></dt>
<dd><p>Whether to automatically save state after responses</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><a href="#id113"><span class="problematic" id="id114">``</span></a><a href="#id115"><span class="problematic" id="id116">`</span></a>python
# Create a documentation expert bot
bot = ChatGPT_Bot(</p>
<blockquote>
<div><p>model_engine=Engines.GPT4,
temperature=0.3,
role_description=”a Python documentation expert”</p>
</div></blockquote>
<p>)</p>
<p># Add tools and use the bot
bot.add_tool(my_function)
response = bot.respond(“Please help document this code.”)</p>
<p># Save the bot’s state for later use
bot.save(“doc_expert.bot”)
<a href="#id117"><span class="problematic" id="id118">``</span></a><a href="#id119"><span class="problematic" id="id120">`</span></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="bots.foundation.openai_bots.ChatGPT_Bot.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bots.foundation.base.Engines" title="bots.foundation.base.Engines"><span class="pre">Engines</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Engines.GPT4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4096</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'bot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'assistant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role_description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'a</span> <span class="pre">friendly</span> <span class="pre">AI</span> <span class="pre">assistant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autosave</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bots/foundation/openai_bots.html#ChatGPT_Bot.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bots.foundation.openai_bots.ChatGPT_Bot.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize a ChatGPT bot with OpenAI-specific components.</p>
<p>Use when you need to create a new OpenAI-based bot instance with specific configuration.
Sets up all necessary components for OpenAI interaction including conversation management,
tool handling, and API communication.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>api_key</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – OpenAI API key. If not provided, attempts to read from
OPENAI_API_KEY environment variable</p></li>
<li><p><strong>model_engine</strong> (<a class="reference internal" href="bots.html#bots.Engines" title="bots.Engines"><em>Engines</em></a>) – The OpenAI model to use, defaults to GPT-4. Determines
capabilities and pricing</p></li>
<li><p><strong>max_tokens</strong> (<em>int</em>) – Maximum tokens in completion response, defaults to 4096. Affects
response length and API costs</p></li>
<li><p><strong>temperature</strong> (<em>float</em>) – Response randomness (0-1), defaults to 0.3. Higher values make
responses more creative but less focused</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of the bot instance, defaults to ‘bot’. Used for identification
in logs and saved states</p></li>
<li><p><strong>role</strong> (<em>str</em>) – Role identifier for the bot, defaults to ‘assistant’. Used in message
formatting</p></li>
<li><p><strong>role_description</strong> (<em>str</em>) – Description of the bot’s role/personality, defaults to
‘a friendly AI assistant’. Guides bot behavior</p></li>
<li><p><strong>autosave</strong> (<em>bool</em>) – Whether to automatically save conversation state, defaults to True.
Enables conversation recovery</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The bot is initialized with OpenAI-specific implementations of:
- OpenAIToolHandler for function calling
- OpenAINode for conversation management
- OpenAIMailbox for API communication</p>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="module-bots.foundation">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-bots.foundation" title="Link to this heading"></a></h2>
<p>Foundation module for the bots library.</p>
<p>This module provides the core abstractions and implementations for working with Language Models
that are instruct-tuned and have tool-using capabilities. It includes base classes and specific
implementations for different LLM providers.</p>
<dl class="simple">
<dt>Performance Considerations:</dt><dd><ul class="simple">
<li><p>Conversation trees optimize context window usage</p></li>
<li><p>Tool execution is handled efficiently with proper error management</p></li>
</ul>
</dd>
<dt>Key Components:</dt><dd><ul class="simple">
<li><p>Bot: Abstract base class defining the core bot interface</p></li>
<li><p>ToolHandler: Manages tool registration and execution</p></li>
<li><p>ConversationNode: Tree-based conversation history management</p></li>
<li><p>Specific implementations (e.g., AnthropicBot, OpenAIBot)</p></li>
</ul>
</dd>
<dt>The foundation module emphasizes:</dt><dd><ul class="simple">
<li><p>Simple primary interface with bot.respond()</p></li>
<li><p>Comprehensive tool use capabilities - any Callables, modules, or python files can be tools.</p></li>
<li><p>Tree-based conversation management</p></li>
<li><p>Complete bot portability</p></li>
<li><p>Unified interface across different LLM providers</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">bots</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnthropicBot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Callable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">my_function</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="gp">... </span><span class="w">    </span><span class="sd">&#39;&#39;&#39;Example tool function&#39;&#39;&#39;</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bot</span> <span class="o">=</span> <span class="n">AnthropicBot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bot</span><span class="o">.</span><span class="n">add_tool</span><span class="p">(</span><span class="n">my_function</span><span class="p">)</span>  <span class="c1"># type: Callable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">bot</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s2">&quot;Use the tool to multiply 5 by 2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bot</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;my_bot.bot&quot;</span><span class="p">)</span>  <span class="c1"># Save complete bot state</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>bots.flows: Higher-level interaction patterns</p></li>
<li><p>bots.tools: Built-in tool implementations</p></li>
</ul>
</div>
<dl class="py data">
<dt class="sig sig-object py" id="bots.foundation.__python_requires__">
<span class="sig-prename descclassname"><span class="pre">bots.foundation.</span></span><span class="sig-name descname"><span class="pre">__python_requires__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'&gt;=3.9'</span></em><a class="headerlink" href="#bots.foundation.__python_requires__" title="Link to this definition"></a></dt>
<dd><p>Minimum Python version required for this package.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="bots.foundation.__version__">
<span class="sig-prename descclassname"><span class="pre">bots.foundation.</span></span><span class="sig-name descname"><span class="pre">__version__</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'0.1.0'</span></em><a class="headerlink" href="#bots.foundation.__version__" title="Link to this definition"></a></dt>
<dd><p>Package version number, following semantic versioning.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, benbuzz790.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>