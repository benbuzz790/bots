[pytest]
# Ignore problematic directories and files
norecursedirs = test_repo* benbuzz790* issue103* trash* __pycache__* .git*
# Test markers
markers =
    unit: marks tests as unit tests (fast, isolated, no external dependencies)
    integration: marks tests as integration tests (deselect with '-m "not integration"')
    e2e: marks tests as end-to-end tests (complete workflows)
    cli: marks tests that require CLI interaction
    docker: marks tests that are Docker-specific
    slow: marks tests as slow running
    serial: marks tests that must run serially (not in parallel)
    flaky: marks tests as flaky (may fail intermittently due to non-deterministic LLM behavior)
    api: marks tests that make real API calls
# Default options
addopts =
    --ignore=tests/test_decorators.py
    --ignore=tests/test_github_tools.py
    --ignore=trash/
    --ignore=tests/test_flows.py
    --tb=short
    -v
    --junitxml=test_results.xml
    # Run tests in parallel but respect serial marker
    -n auto
    --dist loadgroup
    --disable-warnings
    --strict-markers
    # Skip CLI tests in Docker environment by default
    -m "not cli"
# Timeout configuration
timeout_func_only = true
timeout = 300
# Test discovery
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
# Minimum version
minversion = 6.0
# Test paths
testpaths = tests tests/unit tests/integration tests/e2e bots/tests
